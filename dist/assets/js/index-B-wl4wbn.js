var ss=Object.defineProperty,ts=Object.defineProperties;var os=Object.getOwnPropertyDescriptors;var Ce=Object.getOwnPropertySymbols;var Oe=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;var Ee=(s,o,a)=>o in s?ss(s,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[o]=a,X=(s,o)=>{for(var a in o||(o={}))Oe.call(o,a)&&Ee(s,a,o[a]);if(Ce)for(var a of Ce(o))Me.call(o,a)&&Ee(s,a,o[a]);return s},J=(s,o)=>ts(s,os(o));var ke=(s,o)=>{var a={};for(var u in s)Oe.call(s,u)&&o.indexOf(u)<0&&(a[u]=s[u]);if(s!=null&&Ce)for(var u of Ce(s))o.indexOf(u)<0&&Me.call(s,u)&&(a[u]=s[u]);return a};var $e=(s,o,a)=>Ee(s,typeof o!="symbol"?o+"":o,a);var G=(s,o,a)=>new Promise((u,c)=>{var p=v=>{try{g(a.next(v))}catch(h){c(h)}},l=v=>{try{g(a.throw(v))}catch(h){c(h)}},g=v=>v.done?u(v.value):Promise.resolve(v.value).then(p,l);g((a=a.apply(s,o)).next())});import{r as t,j as e,u as me,R as ns,b as we,c as ze,L as ue,d as as,e as ce,f as rs,B as is}from"./react-vendor-DxAs2yQL.js";import{c as cs}from"./supabase-vendor-CN5Z2E5q.js";import"./vendor-mtKMT8Ms.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))u(c);new MutationObserver(c=>{for(const p of c)if(p.type==="childList")for(const l of p.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&u(l)}).observe(document,{childList:!0,subtree:!0});function a(c){const p={};return c.integrity&&(p.integrity=c.integrity),c.referrerPolicy&&(p.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?p.credentials="include":c.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function u(c){if(c.ep)return;c.ep=!0;const p=a(c);fetch(c.href,p)}})();const qe="/assets/png/fequeijaologo-C141I7IF.png",ls="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4%206H20M4%2012H20M4%2018H20'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Re="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M20.7457%203.32851C20.3552%202.93798%2019.722%202.93798%2019.3315%203.32851L12.0371%2010.6229L4.74275%203.32851C4.35223%202.93798%203.71906%202.93798%203.32854%203.32851C2.93801%203.71903%202.93801%204.3522%203.32854%204.74272L10.6229%2012.0371L3.32856%2019.3314C2.93803%2019.722%202.93803%2020.3551%203.32856%2020.7457C3.71908%2021.1362%204.35225%2021.1362%204.74277%2020.7457L12.0371%2013.4513L19.3315%2020.7457C19.722%2021.1362%2020.3552%2021.1362%2020.7457%2020.7457C21.1362%2020.3551%2021.1362%2019.722%2020.7457%2019.3315L13.4513%2012.0371L20.7457%204.74272C21.1362%204.3522%2021.1362%203.71903%2020.7457%203.32851Z'%20fill='%230F0F0F'/%3e%3c/svg%3e",ds="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11%206C13.7614%206%2016%208.23858%2016%2011M16.6588%2016.6549L21%2021M19%2011C19%2015.4183%2015.4183%2019%2011%2019C6.58172%2019%203%2015.4183%203%2011C3%206.58172%206.58172%203%2011%203C15.4183%203%2019%206.58172%2019%2011Z'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",De="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M21,9H19.535l-3.7-5.555a1,1,0,0,0-1.664,1.11L17.132,9H6.868L9.832,4.555a1,1,0,0,0-1.664-1.11L4.465,9H3a1,1,0,0,0,0,2H4v8a2,2,0,0,0,2,2H18a2,2,0,0,0,2-2V11h1a1,1,0,0,0,0-2ZM9,17.5a1,1,0,0,1-2,0v-4a1,1,0,0,1,2,0Zm4,0a1,1,0,0,1-2,0v-4a1,1,0,0,1,2,0Zm4,0a1,1,0,0,1-2,0v-4a1,1,0,0,1,2,0Z'/%3e%3c/svg%3e",Be=t.createContext(void 0),us=({children:s})=>{const[o,a]=t.useState(""),[u,c]=t.useState(!1);return e.jsx(Be.Provider,{value:{searchTerm:o,setSearchTerm:a,isSearchOpen:u,setIsSearchOpen:c},children:s})},ge=()=>{const s=t.useContext(Be);if(s===void 0)throw new Error("useSearch must be used within a SearchProvider");return s},ms="https://zksopamdvsgwirwymngm.supabase.co",hs="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inprc29wYW1kdnNnd2lyd3ltbmdtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzOTQwMjksImV4cCI6MjA3ODk3MDAyOX0.BlnHIr4tlcmCxsJJWib1NLSfodwJya6MSe5Jb8MHdyU",M=cs(ms,hs),Ve=t.createContext(void 0);function ps({children:s}){const[o,a]=t.useState(null),[u,c]=t.useState(!0);t.useEffect(()=>{const x=window.location.pathname==="/admin/login"||window.location.pathname==="/admin/register",d=setTimeout(()=>{x&&(console.warn("StoreContext: Timeout de seguran√ßa na rota de auth, finalizando loading"),c(!1))},500);p();const{data:{subscription:r}}=M.auth.onAuthStateChange((C,I)=>G(null,null,function*(){const T=window.location.pathname.startsWith("/admin"),D=window.location.pathname==="/admin/login"||window.location.pathname==="/admin/register";T&&!D&&(I!=null&&I.user)&&(yield w(I.user.id))}));return()=>{clearTimeout(d),r.unsubscribe()}},[]);const p=()=>G(null,null,function*(){try{const x=window.location.pathname.startsWith("/admin"),d=window.location.pathname==="/admin/login"||window.location.pathname==="/admin/register";if(d){a(null),c(!1);return}if(x&&!d){const{data:{session:C}}=yield M.auth.getSession();C!=null&&C.user&&(yield w(C.user.id)),c(!1);return}const r=l();if(r)yield g(r);else{console.warn("‚ö†Ô∏è [StoreContext] Nenhum slug de loja encontrado na URL. A loja n√£o ser√° carregada."),console.warn("‚ö†Ô∏è [StoreContext] Para carregar uma loja, use: ?store=slug ou acesse via subdom√≠nio"),a(null),c(!1);return}}catch(x){console.error("Erro ao identificar loja:",x),c(!1)}finally{c(!1)}}),l=()=>{const d=new URLSearchParams(window.location.search).get("store");if(d)return d;const r=window.location.hostname,C=r.split(".");if(C.length>=3&&r!=="localhost"&&r!=="127.0.0.1")return C[0];const I=window.location.pathname.match(/^\/loja\/([^\/]+)/);return I?I[1]:null},g=x=>G(null,null,function*(){console.log("üîç [StoreContext] Carregando loja por slug:",x);const{data:d,error:r}=yield M.from("stores").select("*").eq("slug",x).eq("subscription_status","active").single();if(r||!d){window.location.pathname==="/admin/login"||window.location.pathname==="/admin/register"||(console.error("‚ùå [StoreContext] Loja n√£o encontrada:",x,r),console.error("‚ùå [StoreContext] Detalhes do erro:",{message:r==null?void 0:r.message,code:r==null?void 0:r.code,details:r==null?void 0:r.details,hint:r==null?void 0:r.hint}));return}console.log("‚úÖ [StoreContext] Loja carregada:",{id:d.id,name:d.name,slug:d.slug});const C={id:d.id,name:d.name,slug:d.slug,subdomain:d.subdomain,ownerEmail:d.owner_email,ownerName:d.owner_name,subscriptionStatus:d.subscription_status};a(C),yield v(d.id)}),v=x=>G(null,null,function*(){var r,C,I,T,D;const{data:d}=yield M.from("store_customizations").select("*").eq("store_id",x).single();if(d){const j={logoUrl:d.logo_url,logoAltText:d.logo_alt_text,promoBannerVisible:(r=d.promo_banner_visible)!=null?r:!0,promoBannerText:d.promo_banner_text||"ESQUENTA BLACK FRIDAY - AT√â 60%OFF",promoBannerBgColor:d.promo_banner_bg_color||"#FDD8A7",promoBannerTextColor:d.promo_banner_text_color||"#000000",promoBannerUseGradient:(C=d.promo_banner_use_gradient)!=null?C:!0,primaryColor:d.primary_color||"#FF6B35",secondaryColor:d.secondary_color||"#004E89",backgroundColor:d.background_color||"#FFFFFF",textColor:d.text_color||"#000000",showSearch:(I=d.show_search)!=null?I:!0,showMenu:(T=d.show_menu)!=null?T:!0,showCart:(D=d.show_cart)!=null?D:!0};a(i=>i?J(X({},i),{customizations:j}):null)}}),h=()=>G(null,null,function*(){o!=null&&o.id&&(yield v(o.id))}),w=x=>G(null,null,function*(){try{const{data:d,error:r}=yield M.from("admin_users").select("store_id").eq("id",x).single();if(r||!d){console.error("Admin user n√£o encontrado:",r);return}const{data:C,error:I}=yield M.from("stores").select("*").eq("id",d.store_id).single();if(I||!C){console.error("Loja n√£o encontrada:",I);return}const T={id:C.id,name:C.name,slug:C.slug,subdomain:C.subdomain,ownerEmail:C.owner_email,ownerName:C.owner_name,subscriptionStatus:C.subscription_status};a(T),yield v(C.id)}catch(d){console.error("Erro ao carregar loja do admin:",d)}});return e.jsx(Ve.Provider,{value:{store:o,loading:u,reloadCustomizations:h,loadStoreByAdminUser:w},children:s})}const he=()=>{const s=t.useContext(Ve);if(!s)throw new Error("useStore must be used within StoreProvider");return s},gs=({isOpen:s,isExiting:o=!1,onClose:a})=>!s&&!o?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`about-overlay ${o?"exiting":""}`,onClick:a}),e.jsxs("div",{className:`about-modal ${o?"exiting":""}`,children:[e.jsx("button",{className:"about-close-btn",onClick:a,"aria-label":"Fechar",children:e.jsx("img",{src:Re,alt:"Fechar",className:"icon"})}),e.jsxs("div",{className:"about-content",children:[e.jsx("h1",{children:"Quem Somos"}),e.jsxs("div",{className:"about-text",children:[e.jsx("p",{children:"O time do F√©queij√£o √© formado por uma fam√≠lia apaixonada pela ro√ßa. Amantes da culin√°ria e da estrada, nossas viagens sempre foram marcadas pelas receitas e sabores tradicionais que encontramos em cada canto do Brasil."}),e.jsx("p",{children:"Durante a pandemia, nos fizemos uma pergunta que mudou tudo: por que viajar para consumir os produtos que tanto amamos se eles podem vir at√© n√≥s?"}),e.jsx("p",{children:"A ideia parecia simples, e maluca. Com pouco dinheiro no bolso e um Fusca na garagem, nasceu o F√©queij√£o. Come√ßamos vendendo queijos artesanais direto do porta-malas, e em pouco tempo est√°vamos rodando a cidade levando sabor e hist√≥ria at√© a casa das pessoas."}),e.jsx("p",{children:"O sonho cresceu. Hoje, entregamos em todo o Brasil, conectando produtores artesanais a consumidores apaixonados por qualidade e autenticidade."}),e.jsx("p",{children:"Nosso compromisso √© selecionar produtos feitos com alma, contar suas hist√≥rias e garantir que cada mordida traga um pedacinho da ro√ßa at√© voc√™."}),e.jsx("p",{children:"Ah, e o amor pelo queijo s√≥ aumentou: me formei Queijista e Sommelier de Vinhos, para continuar descobrindo e compartilhando os melhores sabores da queijaria artesanal brasileira."})]})]})]})]}),fs="data:image/svg+xml,%3csvg%20id='Layer_22'%20viewBox='0%200%2032%2032'%20xmlns='http://www.w3.org/2000/svg'%20data-name='Layer%2022'%3e%3cpath%20d='m24%202h-10c-2.21%200-4%201.79-4%204v5c0%20.55.45%201%201%201s1-.45%201-1v-5c0-1.1.9-2%202-2v1c0%201.65%201.35%203%203%203h4c1.65%200%203-1.35%203-3v-1c1.1%200%202%20.9%202%202v20c0%201.1-.9%202-2%202h-1c-.55%200-1%20.45-1%201s.45%201%201%201h1c2.21%200%204-1.79%204-4v-20c0-2.21-1.79-4-4-4zm-2%203c0%20.55-.45%201-1%201h-4c-.55%200-1-.45-1-1v-1h6z'/%3e%3cpath%20d='m18.41%2022c-.78-.78-2.05-.78-2.83%200l-.59.59-3.59-3.59.59-.59c.78-.78.78-2.05%200-2.83l-2.59-2.59c-.78-.78-2.05-.78-2.83%200l-1.12%201.12c-.94.94-1.46%202.2-1.46%203.54v.69c0%201.34.52%202.59%201.46%203.54l6.66%206.66c.94.94%202.2%201.46%203.54%201.46h.69c1.34%200%202.59-.52%203.54-1.46l1.12-1.12c.78-.78.78-2.05%200-2.83zm.05%205.12c-.56.56-1.33.88-2.12.88h-.69c-.79%200-1.56-.32-2.12-.88l-6.66-6.66c-.56-.56-.88-1.33-.88-2.12v-.69c0-.79.32-1.56.88-2.12l1.12-1.12%202.59%202.59-1.29%201.29c-.39.39-.39%201.02%200%201.41l5%205c.39.39%201.02.39%201.41%200l1.29-1.29%202.59%202.59z'/%3e%3c/svg%3e",xs="data:image/svg+xml,%3csvg%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Layer_2'%20data-name='Layer%202'%3e%3cpath%20d='m19%2020.5h-14a4.00427%204.00427%200%200%201%20-4-4v-9a4.00427%204.00427%200%200%201%204-4h14a4.00427%204.00427%200%200%201%204%204v9a4.00427%204.00427%200%200%201%20-4%204zm-14-15a2.00229%202.00229%200%200%200%20-2%202v9a2.00229%202.00229%200%200%200%202%202h14a2.00229%202.00229%200%200%200%202-2v-9a2.00229%202.00229%200%200%200%20-2-2z'/%3e%3cpath%20d='m12%2013.43359a4.99283%204.99283%200%200%201%20-3.07031-1.0542l-6.544-5.08984a1.00035%201.00035%200%200%201%201.22852-1.5791l6.54394%205.08984a2.99531%202.99531%200%200%200%203.6836%200l6.54394-5.08984a1.00035%201.00035%200%200%201%201.22852%201.5791l-6.544%205.08984a4.99587%204.99587%200%200%201%20-3.07021%201.0542z'/%3e%3c/g%3e%3c/svg%3e",js=({isOpen:s,isExiting:o=!1,onClose:a})=>!s&&!o?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`contact-overlay ${o?"exiting":""}`,onClick:a}),e.jsxs("div",{className:`contact-modal ${o?"exiting":""}`,children:[e.jsx("button",{className:"contact-close-btn",onClick:a,"aria-label":"Fechar",children:e.jsx("img",{src:Re,alt:"Fechar",className:"icon"})}),e.jsxs("div",{className:"contact-content",children:[e.jsx("h1",{children:"Contato"}),e.jsxs("div",{className:"contact-info",children:[e.jsxs("div",{className:"contact-item",children:[e.jsxs("div",{className:"contact-item-header",children:[e.jsx("img",{src:fs,alt:"WhatsApp",className:"contact-icon"}),e.jsx("span",{className:"contact-label",children:"Whatsapp:"})]}),e.jsx("a",{href:"https://wa.me/554866612431",target:"_blank",rel:"noopener noreferrer",className:"contact-link",children:"48 6661-2431"})]}),e.jsxs("div",{className:"contact-item",children:[e.jsxs("div",{className:"contact-item-header",children:[e.jsx("img",{src:xs,alt:"Gmail",className:"contact-icon"}),e.jsx("span",{className:"contact-label",children:"Gmail:"})]}),e.jsx("a",{href:"mailto:fequeijao@gmail.com",className:"contact-link",children:"fequeijao@gmail.com"})]})]})]})]})]}),Ue=()=>{var O,te;const{setSearchTerm:s,isSearchOpen:o,setIsSearchOpen:a}=ge(),{store:u}=he(),[c,p]=t.useState(!1),[l,g]=t.useState(!1),[v,h]=t.useState(!1),[w,x]=t.useState(!1),[d,r]=t.useState(!1),[C,I]=t.useState(!1),[T,D]=t.useState(!1),[,j]=t.useState("#FFFFFF"),i=t.useRef(null),b=t.useRef(null),$=me(),z=((O=u==null?void 0:u.customizations)==null?void 0:O.logoUrl)||qe,Y=((te=u==null?void 0:u.customizations)==null?void 0:te.logoAltText)||(u==null?void 0:u.name)||"Logo",Q=()=>{a(!o),o&&s("")},n=F=>{s(F.target.value)},y=()=>{p(!c)},L=()=>{p(!1)};t.useEffect(()=>{if(c)h(!0),g(!1);else if(v){g(!0);const F=setTimeout(()=>{h(!1),g(!1)},300);return()=>clearTimeout(F)}},[c,v]),t.useEffect(()=>{if(window.innerWidth<768)return;const F=()=>{const K=document.querySelector(".logo-image");if(!K)return;const ne=U=>{const oe=new Image;oe.onload=()=>{try{const ee=document.createElement("canvas"),se=ee.getContext("2d");if(!se)return;ee.width=oe.width,ee.height=oe.height,se.drawImage(oe,0,0);const ae=Math.max(1,Math.floor(Math.min(oe.width,oe.height)*.05)),H=[];for(let m=0;m<oe.width;m+=ae){const f=se.getImageData(m,0,1,1).data;H.push(f[0],f[1],f[2])}for(let m=0;m<oe.width;m+=ae){const f=se.getImageData(m,oe.height-1,1,1).data;H.push(f[0],f[1],f[2])}for(let m=0;m<oe.height;m+=ae){const f=se.getImageData(0,m,1,1).data;H.push(f[0],f[1],f[2])}for(let m=0;m<oe.height;m+=ae){const f=se.getImageData(oe.width-1,m,1,1).data;H.push(f[0],f[1],f[2])}let A=0,V=0,W=0;const N=H.length/3;if(N>0){for(let f=0;f<H.length;f+=3)A+=H[f],V+=H[f+1],W+=H[f+2];A=Math.round(A/N),V=Math.round(V/N),W=Math.round(W/N);const m=`rgb(${A}, ${V}, ${W})`;j(m),window.innerWidth>=768&&b.current&&(b.current.style.backgroundColor=m)}}catch(ee){console.error("Erro ao detectar cor da borda:",ee)}},oe.onerror=()=>{console.error("Erro ao carregar imagem do logo")},oe.src=U};K.complete&&K.naturalWidth>0?ne(K.src):K.addEventListener("load",()=>{ne(K.src)},{once:!0})},B=setTimeout(F,300),le=()=>{window.innerWidth>=768?F():b.current&&(b.current.style.backgroundColor="#FFFFFF")};return window.addEventListener("resize",le),()=>{clearTimeout(B),window.removeEventListener("resize",le)}},[]),t.useEffect(()=>{o&&i.current&&setTimeout(()=>{var F;(F=i.current)==null||F.focus()},0)},[o]);const P=F=>{F.preventDefault(),L(),o&&(a(!1),s(""));const B=window.scrollY||document.documentElement.scrollTop;sessionStorage.setItem("homeScrollPosition",B.toString()),sessionStorage.setItem("navigationActive","true"),$("/cart")},k=F=>{F.preventDefault(),L(),o&&(a(!1),s("")),x(!0),r(!1),document.body.style.overflow="hidden"},S=()=>{r(!0),document.body.style.overflow="",setTimeout(()=>{x(!1),r(!1)},300)},R=F=>{F.preventDefault(),L(),o&&(a(!1),s("")),I(!0),D(!1),document.body.style.overflow="hidden"},_=()=>{D(!0),document.body.style.overflow="",setTimeout(()=>{I(!1),D(!1)},300)};return e.jsxs("header",{className:"header",ref:b,children:[e.jsxs("div",{className:"header-container",children:[e.jsx("button",{id:"menu-toggle",className:`menu-btn ${c?"close":""} ${o?"hidden":""}`,"aria-label":"Menu",onClick:y,children:c?e.jsx("img",{src:Re,alt:"Fechar",className:"icon"}):e.jsx("img",{src:ls,alt:"Menu",className:"icon"})}),e.jsxs("ul",{id:"menu",className:`menu ${c?"open":""}`,children:[e.jsx("li",{children:e.jsx("a",{href:"#about",onClick:k,children:"Quem Somos"})}),e.jsx("li",{children:e.jsx("a",{href:"#contact",onClick:R,children:"Contato"})}),e.jsx("li",{className:"cart-menu-item",children:e.jsxs("a",{href:"#cart",onClick:P,className:"cart-link",children:[e.jsx("img",{src:De,alt:"Carrinho",className:"menu-icon"}),e.jsx("span",{children:"Carrinho"})]})})]}),v&&e.jsx("div",{className:`menu-overlay ${l?"exiting":""}`,onClick:L}),e.jsx("div",{className:`logo-container ${o?"hidden":""}`,children:e.jsx("img",{src:z,alt:Y,className:"logo-image"})}),e.jsx("div",{className:`search-container ${o?"expanded":""}`,children:e.jsx("input",{ref:i,type:"text",id:"search-input",className:`search-input ${o?"square":""}`,placeholder:"Buscar produtos...",onChange:n})}),e.jsx("button",{id:"search-btn",className:`search-btn ${o?"close":""}`,"aria-label":"Buscar",onClick:Q,children:o?e.jsx("svg",{className:"icon close-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):e.jsx("img",{src:ds,alt:"Buscar",className:"icon"})})]}),e.jsx(gs,{isOpen:w,isExiting:d,onClose:S}),e.jsx(js,{isOpen:C,isExiting:T,onClose:_})]})},He=()=>{var l;const{store:s}=he(),o=s==null?void 0:s.customizations;if(o&&!o.promoBannerVisible)return null;const a=(o==null?void 0:o.promoBannerText)||"ESQUENTA BLACK FRIDAY - AT√â 60%OFF",u=(o==null?void 0:o.promoBannerBgColor)||"#FDD8A7",c=(o==null?void 0:o.promoBannerTextColor)||"#000000",p=(l=o==null?void 0:o.promoBannerUseGradient)!=null?l:!0;return e.jsx("section",{className:"promo-banner",style:{backgroundColor:u},children:e.jsx("p",{className:`promo-text ${p?"with-gradient":""}`,style:p?void 0:{color:c},children:a})})},vs="/assets/png/product1-CA_tx_r8.png",ws="/assets/jpg/product2-BnBLHrRq.jpg",Ns="/assets/png/product3-DmbgFoFG.png",bs="/assets/jpeg/product4-vW8tXxiB.jpeg",Cs="/assets/jpeg/product5-mw1IjyBE.jpeg",ys="/assets/png/product6-ChsRdzeq.png",Ss="/assets/jpeg/product7-B5jCYEPa.jpeg",Es="/assets/jpeg/product8-Dcao07g5.jpeg",ks="/assets/png/product9-Dmdkg5tD.png",Ps="/assets/jpeg/product10-UdP-oQAe.jpeg",Is="/assets/png/product11-CEe1fPDs.png",Ls="/assets/png/product12-DqrPRfri.png",As="/assets/png/product13-C4Ch3z6V.png",_s="/assets/jpeg/product14-8b1Eegqu.jpeg",Ts="/assets/png/product15-BjajK_qi.png",Rs="/assets/png/product16-BsIzIFfY.png",Ds="/assets/jpeg/product17-SnbqJtvE.jpeg",Fs="/assets/jpeg/product1s2-BIilaynO.jpeg",Os="/assets/jpeg/product2s2-EOLeTcwm.jpeg",Ms="/assets/jpeg/product3s2-55Nc68in.jpeg",$s="/assets/jpeg/product4s2-DZBYgifb.jpeg",zs="/assets/jpeg/product5s2-BdE0EEYV.jpeg",qs="/assets/jpeg/product6s2-CR6lu-sD.jpeg",re={product1:vs,product2:ws,product3:Ns,product4:bs,product5:Cs,product6:ys,product7:Ss,product8:Es,product9:ks,product10:Ps,product11:Is,product12:Ls,product13:As,product14:_s,product15:Ts,product16:Rs,product17:Ds,product1s2:Fs,product2s2:Os,product3s2:Ms,product4s2:$s,product5s2:zs,product6s2:qs},Ge=({isOpen:s,onContinue:o,onAdd:a,onClose:u})=>{const[c,p]=t.useState(!1);t.useEffect(()=>{if(s){p(!1);const h=window.innerWidth-document.documentElement.clientWidth,w=document.body.style.overflow,x=document.body.style.paddingRight,d=document.querySelector(".fixed-header"),r=d?d.style.paddingRight:"";return document.body.style.overflow="hidden",document.body.style.paddingRight=`${h}px`,d&&(d.style.paddingRight=`${h}px`),()=>{document.body.style.overflow=w,document.body.style.paddingRight=x,d&&(d.style.paddingRight=r)}}},[s]);const l=()=>{p(!0),setTimeout(()=>{u(),p(!1)},300)},g=()=>{p(!0),setTimeout(()=>{o(),p(!1)},300)},v=()=>{p(!0),setTimeout(()=>{a(),p(!1)},300)};return!s&&!c?null:e.jsx("div",{className:`popup-overlay ${c?"closing":""}`,children:e.jsxs("div",{className:`popup-content ${c?"closing":""}`,children:[e.jsx("button",{className:"popup-close-btn",onClick:l,"aria-label":"Fechar",children:e.jsx("svg",{className:"popup-close-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20.7457 3.32851C20.3552 2.93798 19.722 2.93798 19.3315 3.32851L12.0371 10.6229L4.74275 3.32851C4.35223 2.93798 3.71906 2.93798 3.32854 3.32851C2.93801 3.71903 2.93801 4.3522 3.32854 4.74272L10.6229 12.0371L3.32856 19.3314C2.93803 19.722 2.93803 20.3551 3.32856 20.7457C3.71908 21.1362 4.35225 21.1362 4.74277 20.7457L12.0371 13.4513L19.3315 20.7457C19.722 21.1362 20.3552 21.1362 20.7457 20.7457C21.1362 20.3551 21.1362 19.722 20.7457 19.3315L13.4513 12.0371L20.7457 4.74272C21.1362 4.3522 21.1362 3.71903 20.7457 3.32851Z",fill:"#ff8d85"})})}),e.jsx("p",{className:"popup-question",children:"Gostaria de adicionar algo?"}),e.jsxs("div",{className:"popup-buttons",children:[e.jsx("button",{className:"popup-btn popup-btn-continue",onClick:g,children:"Continuar Compra"}),e.jsx("button",{className:"popup-btn popup-btn-add",onClick:v,children:"Adicionar"})]})]})})},Qe=t.createContext(void 0),Bs=({children:s})=>{const[o,a]=t.useState([]),u=t.useCallback(v=>{a(h=>h.find(x=>x.productId===v)?h.map(x=>x.productId===v?J(X({},x),{quantity:x.quantity+1}):x):[...h,{productId:v,quantity:1}])},[]),c=t.useCallback(v=>{a(h=>{const w=h.find(x=>x.productId===v);return w?w.quantity>1?h.map(x=>x.productId===v?J(X({},x),{quantity:x.quantity-1}):x):h.filter(x=>x.productId!==v):h})},[]),p=t.useCallback(v=>{const h=o.find(w=>w.productId===v);return h?h.quantity:0},[o]),l=t.useCallback(()=>o.length>0,[o]),g=t.useMemo(()=>({cartItems:o,addToCart:u,removeFromCart:c,getItemQuantity:p,hasItems:l}),[o,u,c,p,l]);return e.jsx(Qe.Provider,{value:g,children:s})},fe=()=>{const s=t.useContext(Qe);if(s===void 0)throw new Error("useCart must be used within a CartProvider");return s};function Vs(s={}){const{threshold:o=.01,rootMargin:a="100px",triggerOnce:u=!0}=s,c=t.useRef(null),[p,l]=t.useState(!1),g=t.useRef(null);return t.useEffect(()=>{const v=c.current;if(v&&!(p&&u)){if(g.current&&(g.current.disconnect(),g.current=null),typeof IntersectionObserver=="undefined"){l(!0);return}return g.current||(g.current=new IntersectionObserver(([h])=>{h.isIntersecting?(l(!0),u&&g.current&&(g.current.disconnect(),g.current=null)):u||l(!1)},{threshold:o,rootMargin:a})),g.current.observe(v),()=>{g.current&&(g.current.disconnect(),g.current=null)}}},[o,a,u,p]),[c,p]}function de(s){if(!s||s.trim()==="")return"";const o=s.trim();return o.startsWith("R$")?o:`R$${o}`}const Fe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.16565%2010.1534C5.07629%208.99181%205.99473%208%207.15975%208H16.8402C18.0053%208%2018.9237%208.9918%2018.8344%2010.1534L18.142%2019.1534C18.0619%2020.1954%2017.193%2021%2016.1479%2021H7.85206C6.80699%2021%205.93811%2020.1954%205.85795%2019.1534L5.16565%2010.1534Z'%20stroke='%23000000'%20stroke-width='2'/%3e%3cpath%20d='M19.5%205H4.5'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'/%3e%3cpath%20d='M10%203C10%202.44772%2010.4477%202%2011%202H13C13.5523%202%2014%202.44772%2014%203V5H10V3Z'%20stroke='%23000000'%20stroke-width='2'/%3e%3cpath%20d='M14%2012V17'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'/%3e%3cpath%20d='M10%2012V17'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'/%3e%3c/svg%3e",Ie="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%20512%20512'%20style='enable-background:new%200%200%20512%20512;'%20xml:space='preserve'%3e%3cg%3e%3cg%3e%3cpath%20d='M256,0C114.833,0,0,114.833,0,256s114.833,256,256,256s256-114.853,256-256S397.167,0,256,0z%20M256,472.341%20c-119.275,0-216.341-97.046-216.341-216.341S136.725,39.659,256,39.659S472.341,136.705,472.341,256S375.295,472.341,256,472.341z%20'/%3e%3c/g%3e%3c/g%3e%3cg%3e%3cg%3e%3cpath%20d='M355.148,234.386H275.83v-79.318c0-10.946-8.864-19.83-19.83-19.83s-19.83,8.884-19.83,19.83v79.318h-79.318%20c-10.966,0-19.83,8.884-19.83,19.83s8.864,19.83,19.83,19.83h79.318v79.318c0,10.946,8.864,19.83,19.83,19.83%20s19.83-8.884,19.83-19.83v-79.318h79.318c10.966,0,19.83-8.884,19.83-19.83S366.114,234.386,355.148,234.386z'/%3e%3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",Us=({productId:s,image:o,title:a,description1:u,description2:c,oldPrice:p,newPrice:l,fullDescription:g,hasDiscount:v=!1,priority:h=!1,previewMode:w=!1})=>{const x=me(),{addToCart:d,removeFromCart:r,getItemQuantity:C,hasItems:I}=fe(),T=re[o]||re.product1,[D,j]=Vs({threshold:.01,rootMargin:"100px",triggerOnce:!0}),i=h||j,[b,$]=t.useState(h),[z,Y]=t.useState(!1),[Q,n]=t.useState(!1),[y,L]=t.useState(!1),[P,k]=t.useState(!1),S=t.useRef(null),R=t.useRef(null),_=C(s),O=I(),[te,F]=t.useState(0),B=t.useRef(_);t.useEffect(()=>{const A=B.current;B.current=_,!(_<A)&&_>A&&_>0&&F(V=>V+1)},[_]);const le=A=>{A.stopPropagation(),r(s)},K=A=>{A.stopPropagation(),O?d(s):k(!0)},ne=()=>{k(!1);const A=window.scrollY||document.documentElement.scrollTop;sessionStorage.setItem("homeScrollPosition",A.toString()),d(s),x(`/checkout/${s}`)},U=()=>{d(s),k(!1)},oe=()=>{k(!1)},ee=t.useMemo(()=>de(p),[p]),se=t.useMemo(()=>de(l),[l]),ae=t.useCallback(()=>{if(w)return;const A=window.scrollY||document.documentElement.scrollTop;sessionStorage.setItem("homeScrollPosition",A.toString()),sessionStorage.setItem("navigationActive","true"),x(`/product/${s}`)},[s,x,w]),H=A=>{A.preventDefault();const W=A.currentTarget.closest(".product-card");if(!W)return;const N=W.querySelector(".readmore");if(!N)return;const m=!Q;n(m),m?(N.classList.add("expand"),setTimeout(()=>{L(!0)},100)):(N.classList.remove("expand"),L(!1))};return t.useEffect(()=>{if(Q||!S.current||!R.current)return;const A=()=>{const m=S.current,f=R.current;if(!m||!f)return;const E=parseFloat(getComputedStyle(m).maxHeight)||m.offsetHeight;if(m.scrollHeight<=E){f.style.setProperty("--mask-start","100%");return}f.style.setProperty("--mask-start","100%")};(()=>{"requestIdleCallback"in window?requestIdleCallback(A,{timeout:200}):setTimeout(A,100)})();let W;const N=()=>{clearTimeout(W),W=setTimeout(A,150)};return window.addEventListener("resize",N,{passive:!0}),()=>{clearTimeout(W),window.removeEventListener("resize",N)}},[u,c,a,Q]),t.useEffect(()=>{if(h){const A=new Image;A.onload=()=>{$(!0)},A.onerror=()=>{Y(!0)},A.src=T;return}if(i&&!b&&!z){const A=new Image;A.onload=()=>{$(!0)},A.onerror=()=>{Y(!0)},A.src=T}},[i,T,b,z,h]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"product-card",children:[e.jsxs("div",{className:"product-image-wrapper",ref:D,onClick:ae,children:[!b&&!z&&e.jsx("div",{className:"product-image-placeholder"}),(i||h)&&e.jsx("img",{src:T,alt:a,className:"product-image",loading:h?"eager":"lazy",onLoad:()=>$(!0),onError:()=>{Y(!0),$(!1)},style:{opacity:b?1:0,transition:"opacity 0.3s ease-in-out",position:b?"relative":"absolute",top:b?"auto":0,left:b?"auto":0,width:"100%",height:"200px"}}),_>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"product-image-overlay"}),e.jsx("div",{className:"product-quantity-badge bounce-up",children:_},te)]})]}),e.jsxs("div",{className:"product-content",children:[e.jsx("div",{className:"TeD",ref:R,children:e.jsx("div",{className:"product-text-wrapper",children:e.jsxs("div",{className:"product-text-content readmore",ref:S,children:[e.jsx("h3",{className:"product-title",onClick:ae,children:a}),u&&e.jsx("p",{className:"product-description",onClick:ae,children:u}),c&&e.jsx("p",{className:"product-description",onClick:ae,children:c}),Q&&g&&e.jsx("div",{className:"product-full-description",children:g.split(`
`).map((A,V)=>A?e.jsx("p",{className:"product-description",children:A},V):e.jsx("br",{},V))})]})})}),g&&e.jsxs(e.Fragment,{children:[y&&!w&&e.jsxs("a",{href:`/product/${s}`,className:"readmore-link readmore-link-top",onClick:A=>{A.preventDefault(),A.stopPropagation();const V=window.scrollY||document.documentElement.scrollTop;V>0&&sessionStorage.setItem("homeScrollPosition",V.toString()),x(`/product/${s}`)},children:[e.jsx("img",{src:Ie,alt:"Ver tudo",className:"readmore-icon"}),e.jsx("span",{className:"readmore-text",children:"Ver tudo"})]}),e.jsxs("a",{href:"#",className:"readmore-link",onClick:A=>{A.stopPropagation(),H(A)},children:[e.jsx("svg",{className:"readmore-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9 13L12 16M12 16L15 13M12 16V8M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("span",{className:"readmore-text",children:Q?"Ler menos":"Ler mais"})]})]}),e.jsxs("div",{className:"price-container",onClick:ae,children:[v&&ee&&ee.trim()!==""&&ee!==se&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"price-old",children:ee}),e.jsx("span",{className:"price-separator",children:"|"})]}),e.jsx("span",{className:"price-new",children:se})]})]}),e.jsxs("div",{className:"buy-btn-container",onClick:A=>A.stopPropagation(),children:[O&&e.jsx("button",{className:"trash-btn",onClick:le,"aria-label":"Remover do carrinho",children:e.jsx("img",{src:Fe,alt:"Remover",className:"trash-icon"})}),e.jsx("button",{className:`buy-btn ${O?"add-mode":""}`,onClick:K,children:O?"ADICIONAR":"COMPRAR"})]})]}),e.jsx(Ge,{isOpen:P,onContinue:ne,onAdd:U,onClose:oe})]})},Pe=ns.memo(Us);let je=null,Le=0,ve=null,Ae=0;const We=6e4;function Se(s,o){if(!s||s.trim()===""||s===o)return!1;const a=p=>parseFloat(p.replace(/R\$\s*/g,"").replace(/\./g,"").replace(",",".").trim())||0,u=a(s),c=a(o);return u>c&&u>0&&c>0}function Ne(s){return G(this,null,function*(){console.log("üîç [getAllProducts] Iniciando busca de produtos",{storeId:s});const o=Date.now();if(je&&o-Le<We)return console.log("‚úÖ [getAllProducts] Retornando do cache",{count:je.length}),je;let a=M.from("products").select("*").eq("is_active",!0);s?(console.log("üè™ [getAllProducts] Filtrando por loja:",s),a=a.eq("store_id",s)):console.log("‚ö†Ô∏è [getAllProducts] Nenhum storeId fornecido - buscando todos os produtos ativos");const{data:u,error:c}=yield a.order("display_order",{ascending:!0});if(c)return console.error("‚ùå [getAllProducts] Erro ao buscar produtos:",c),console.error("‚ùå [getAllProducts] Detalhes do erro:",{message:c.message,code:c.code,details:c.details,hint:c.hint}),[];console.log("‚úÖ [getAllProducts] Produtos encontrados:",{count:(u==null?void 0:u.length)||0});const p=(u||[]).map(l=>{const g=l.old_price||"",v=l.new_price,h=Se(g,v);return{id:l.id,image:l.image,title:l.title,description1:l.description1||"",description2:l.description2||"",oldPrice:g,newPrice:v,hasDiscount:h,setId:l.set_id,subsetId:l.subset_id,fullDescription:l.full_description||"",forceBuyButton:l.force_buy_button||!1}});return je=p,Le=o,p})}function Hs(s,o=!1){return G(this,null,function*(){console.log("üîç [getProductsGrouped] Iniciando busca de produtos agrupados",{storeId:s,forceRefresh:o});const a=Date.now();if(!o&&ve&&a-Ae<We)return console.log("‚úÖ [getProductsGrouped] Retornando do cache",{count:ve.length}),ve;let u=M.from("sets").select("*").eq("is_active",!0),c=M.from("subsets").select("*").eq("is_active",!0),p=M.from("products").select("*").eq("is_active",!0);s?(console.log("üè™ [getProductsGrouped] Filtrando por loja:",s),u=u.eq("store_id",s),c=c.eq("store_id",s),p=p.eq("store_id",s)):console.log("‚ö†Ô∏è [getProductsGrouped] Nenhum storeId fornecido - buscando todos os dados ativos");const[l,g,v]=yield Promise.all([u.order("display_order",{ascending:!0}),c.order("display_order",{ascending:!0}),p.order("display_order",{ascending:!0})]),{data:h,error:w}=l,{data:x,error:d}=g,{data:r,error:C}=v;if(w)return console.error("‚ùå [getProductsGrouped] Erro ao buscar sets:",w),console.error("‚ùå [getProductsGrouped] Detalhes do erro sets:",{message:w.message,code:w.code,details:w.details,hint:w.hint}),[];if(d&&console.error("‚ö†Ô∏è [getProductsGrouped] Erro ao buscar subsets:",d),C)return console.error("‚ùå [getProductsGrouped] Erro ao buscar products:",C),console.error("‚ùå [getProductsGrouped] Detalhes do erro products:",{message:C.message,code:C.code,details:C.details,hint:C.hint}),[];console.log("‚úÖ [getProductsGrouped] Dados encontrados:",{sets:(h==null?void 0:h.length)||0,subsets:(x==null?void 0:x.length)||0,products:(r==null?void 0:r.length)||0});const I=(r||[]).map(j=>{const i=j.old_price||"",b=j.new_price,$=Se(i,b);return{id:j.id,image:j.image,title:j.title,description1:j.description1||"",description2:j.description2||"",oldPrice:i,newPrice:b,hasDiscount:$,setId:j.set_id,subsetId:j.subset_id,fullDescription:j.full_description||""}}),T=new Map;(h||[]).forEach(j=>{T.set(j.id,{id:j.id,name:j.name,displayOrder:j.display_order,subsets:[],products:[]})}),(x||[]).forEach(j=>{const i=T.get(j.set_id);i&&(i.subsets=i.subsets||[],i.subsets.push({id:j.id,setId:j.set_id,name:j.name,displayOrder:j.display_order,products:[]}))}),I.forEach(j=>{if(j.subsetId){const i=T.get(j.setId);if(i&&i.subsets){const b=i.subsets.find($=>$.id===j.subsetId);b&&(b.products=b.products||[],b.products.push(j))}}else if(j.setId){const i=T.get(j.setId);i&&(i.products=i.products||[],i.products.push(j))}});const D=Array.from(T.values()).sort((j,i)=>j.displayOrder-i.displayOrder);return ve=D,Ae=a,D})}function ye(){je=null,Le=0,ve=null,Ae=0}function Gs(s){return G(this,null,function*(){var w,x;const h=s,{oldPrice:o="",newPrice:a,storeId:u}=h,c=ke(h,["oldPrice","newPrice","storeId"]);if(!u)return console.error("‚ùå [createProduct] storeId √© obrigat√≥rio!"),null;console.log("üîç [createProduct] Criando produto:",{title:s.title,storeId:u});const{data:p,error:l}=yield M.from("products").insert(J(X({},c),{store_id:u,old_price:o||"",new_price:a,description1:s.description1||"",description2:s.description2||"",display_order:(w=s.displayOrder)!=null?w:0,is_active:(x=s.isActive)!=null?x:!0})).select().single();if(l)return console.error("‚ùå [createProduct] Erro ao criar produto:",l),console.error("‚ùå [createProduct] Detalhes:",{message:l.message,code:l.code,details:l.details,hint:l.hint}),null;console.log("‚úÖ [createProduct] Produto criado com sucesso:",p.id);const g=p.old_price||"",v=Se(g,p.new_price);return{id:p.id,image:p.image,title:p.title,description1:p.description1||"",description2:p.description2||"",oldPrice:g,newPrice:p.new_price,hasDiscount:v,setId:p.set_id,subsetId:p.subset_id,fullDescription:p.full_description||"",forceBuyButton:p.force_buy_button||!1}})}function Qs(s){return G(this,null,function*(){const w=s,{id:o,oldPrice:a,newPrice:u}=w,c=ke(w,["id","oldPrice","newPrice"]),p=X({},c);a!==void 0&&(p.old_price=a||""),u!==void 0&&(p.new_price=u),s.description1!==void 0&&(p.description1=s.description1||""),s.description2!==void 0&&(p.description2=s.description2||""),s.displayOrder!==void 0&&(p.display_order=s.displayOrder),s.isActive!==void 0&&(p.is_active=s.isActive);const{data:l,error:g}=yield M.from("products").update(p).eq("id",o).select().single();if(g)return console.error("Error updating product:",g),null;const v=l.old_price||"",h=Se(v,l.new_price);return{id:l.id,image:l.image,title:l.title,description1:l.description1||"",description2:l.description2||"",oldPrice:v,newPrice:l.new_price,hasDiscount:h,setId:l.set_id,subsetId:l.subset_id,fullDescription:l.full_description||"",forceBuyButton:l.force_buy_button||!1}})}function Ws(s){return G(this,null,function*(){const{error:o}=yield M.from("products").update({is_active:!1}).eq("id",s);return o?(console.error("Error deleting product:",o),!1):!0})}const Zs=({isExiting:s=!1})=>{const o=me(),{isSearchOpen:a,setIsSearchOpen:u,setSearchTerm:c}=ge(),p=l=>{l.preventDefault(),a&&(u(!1),c(""));const g=window.scrollY||document.documentElement.scrollTop;sessionStorage.setItem("homeScrollPosition",g.toString()),sessionStorage.setItem("navigationActive","true"),o("/cart")};return e.jsx("div",{className:`cart-bottom-modal ${s?"exiting":""}`,children:e.jsx("button",{className:"cart-bottom-button",onClick:p,children:e.jsxs("div",{className:"cart-bottom-content",children:[e.jsx("span",{children:"Ver carrinho"}),e.jsx("img",{src:De,alt:"Carrinho",className:"cart-bottom-icon"})]})})})};function Ze({previewMode:s=!1}){const o=t.useRef(null),a=we(),{searchTerm:u,isSearchOpen:c}=ge(),{hasItems:p}=fe(),{store:l,loading:g}=he(),[v,h]=t.useState([]),[w,x]=t.useState([]),[d,r]=t.useState(!0),[C,I]=t.useState(!1),[T,D]=t.useState(!1),[j,i]=t.useState(!1),b=t.useRef(!1);t.useEffect(()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual"),sessionStorage.getItem("navigationActive")||(document.documentElement.scrollTop=0,document.body.scrollTop=0,window.scrollTo(0,0));const y=()=>{sessionStorage.removeItem("navigationActive")};return window.addEventListener("beforeunload",y),()=>{window.removeEventListener("beforeunload",y)}},[]),t.useLayoutEffect(()=>{if(s){i(!0);return}b.current=!1,i(!1);const n=sessionStorage.getItem("navigationActive"),y=sessionStorage.getItem("homeScrollPosition");if(!n)y&&sessionStorage.removeItem("homeScrollPosition"),document.documentElement.scrollTop=0,document.body.scrollTop=0,window.scrollTo(0,0),b.current=!0,i(!0);else if(y){const L=parseInt(y,10);!isNaN(L)&&L>0?(document.documentElement.scrollTop=L,document.body.scrollTop=L,window.scrollTo(0,L),b.current=!0,requestAnimationFrame(()=>{document.documentElement.scrollTop=L,document.body.scrollTop=L,window.scrollTo(0,L),requestAnimationFrame(()=>{const P=window.scrollY||document.documentElement.scrollTop;Math.abs(P-L)<10?i(!0):(document.documentElement.scrollTop=L,document.body.scrollTop=L,window.scrollTo(0,L),setTimeout(()=>{i(!0)},50))})})):(document.documentElement.scrollTop=0,document.body.scrollTop=0,window.scrollTo(0,0),i(!0))}else document.documentElement.scrollTop=0,document.body.scrollTop=0,window.scrollTo(0,0),i(!0);n||sessionStorage.setItem("navigationActive","true")},[a.pathname]),t.useEffect(()=>{if(console.log("üîç [Home] Verificando loja para carregar produtos",{hasStore:!!l,storeId:l==null?void 0:l.id,storeName:l==null?void 0:l.name,loading:g}),!(l!=null&&l.id)){g?(console.log("‚è≥ [Home] Aguardando loja carregar..."),r(!0)):(console.warn("‚ö†Ô∏è [Home] Nenhuma loja dispon√≠vel. Produtos n√£o ser√£o carregados."),console.warn("‚ö†Ô∏è [Home] Para carregar produtos, acesse com ?store=slug na URL"),r(!1),h([]),x([]));return}let n=!0;return r(!0),G(null,null,function*(){try{console.log("üöÄ [Home] Iniciando busca de produtos para loja:",l.id);const L=yield Hs(l.id,s);if(n){if(L.length>0){console.log("‚úÖ [Home] Produtos agrupados encontrados:",L.length,"sets"),x(L);const P=[];L.forEach(k=>{k.products&&P.push(...k.products),k.subsets&&k.subsets.forEach(S=>{S.products&&P.push(...S.products)})}),h(P),console.log("‚úÖ [Home] Total de produtos carregados:",P.length)}else{console.log("‚ö†Ô∏è [Home] Nenhum set encontrado, tentando getAllProducts...");const P=yield Ne(l.id);h(P),x([]),console.log("‚úÖ [Home] Produtos carregados (fallback):",P.length)}requestAnimationFrame(()=>{n&&(r(!1),console.log("‚úÖ [Home] Carregamento conclu√≠do"))})}}catch(L){console.error("‚ùå [Home] Erro ao carregar produtos:",L),n&&(h([]),x([]),r(!1))}}),()=>{n=!1}},[l==null?void 0:l.id,g,s]),t.useEffect(()=>{if(a.pathname!=="/")return;let n,y=0;const L=()=>{const S=window.scrollY||document.documentElement.scrollTop;Math.abs(S-y)>50&&S>0&&(sessionStorage.setItem("homeScrollPosition",S.toString()),y=S)},P=()=>{clearTimeout(n),n=setTimeout(L,200)},k=()=>{"requestIdleCallback"in window?requestIdleCallback(L,{timeout:500}):setTimeout(L,300)};return window.addEventListener("scroll",P,{passive:!0}),window.addEventListener("scroll",k,{passive:!0,once:!1}),()=>{clearTimeout(n),window.removeEventListener("scroll",P),window.removeEventListener("scroll",k);const S=window.scrollY||document.documentElement.scrollTop;S>0&&sessionStorage.setItem("homeScrollPosition",S.toString())}},[a.pathname]),t.useEffect(()=>{if(sessionStorage.getItem("comingFromContinuePurchase")!=="true"){if(p())D(!1),I(!0);else if(C){D(!0);const y=setTimeout(()=>{I(!1),D(!1)},300);return()=>clearTimeout(y)}}},[p(),C]),t.useEffect(()=>{if(a.pathname==="/"&&!d&&j&&sessionStorage.getItem("navigationActive")){const n=sessionStorage.getItem("homeScrollPosition");if(n){const y=parseInt(n,10);if(!isNaN(y)&&y>0){const L=()=>{const P=window.scrollY||document.documentElement.scrollTop;Math.abs(P-y)>5&&(document.documentElement.scrollTop=y,document.body.scrollTop=y,window.scrollTo(0,y))};requestAnimationFrame(()=>{requestAnimationFrame(()=>{L()})})}}}},[a.pathname,d,j]);const $=t.useMemo(()=>{if(!u.trim())return v;const n=u.toUpperCase().trim();return v.filter(y=>{var L,P;return y.title.toUpperCase().includes(n)||y.description1.toUpperCase().includes(n)||y.description2.toUpperCase().includes(n)||((P=(L=y.fullDescription)==null?void 0:L.toUpperCase().includes(n))!=null?P:!1)})},[u,v]),z=t.useMemo(()=>u.trim()?[]:w,[u,w]),Y=()=>{if(u.trim())return e.jsx("div",{className:"products-grid",children:$.length>0?$.map((n,y)=>e.jsx(Pe,{productId:n.id,image:n.image,title:n.title,description1:n.description1,description2:n.description2,oldPrice:n.oldPrice,newPrice:n.newPrice,fullDescription:n.fullDescription,hasDiscount:n.hasDiscount,priority:y<6,previewMode:s},n.id)):d?null:e.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"40px",color:"#4A2C1A"},children:e.jsxs("p",{children:['Nenhum produto encontrado para "',u,'"']})})});if(z.length>0){let n=0;return console.log("Home: Renderizando sets:",z.length,z.map(y=>{var L,P;return{name:y.name,products:((L=y.products)==null?void 0:L.length)||0,subsets:((P=y.subsets)==null?void 0:P.length)||0}})),z.map(y=>{const L=[];y.products&&L.push(...y.products),y.subsets&&y.subsets.forEach(k=>{k.products&&L.push(...k.products)});const P=n;return n+=L.length,e.jsxs("div",{className:"product-section",children:[!c&&e.jsxs("h2",{className:"section-title",children:[y.name,":"]}),e.jsx("div",{className:"products-grid",children:L.length>0?L.map((k,S)=>e.jsx(Pe,{productId:k.id,image:k.image,title:k.title,description1:k.description1,description2:k.description2,oldPrice:k.oldPrice,newPrice:k.newPrice,fullDescription:k.fullDescription,hasDiscount:k.hasDiscount,priority:P+S<6,previewMode:s},k.id)):e.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"40px",color:"#4A2C1A"},children:e.jsx("p",{children:"Nenhum produto nesta se√ß√£o ainda"})})})]},y.id)})}return e.jsxs(e.Fragment,{children:[!c&&e.jsx("h2",{className:"section-title",children:"OS MAIS PEDIDOS:"}),e.jsx("div",{className:"products-grid",children:$.length>0?$.map((n,y)=>e.jsx(Pe,{productId:n.id,image:n.image,title:n.title,description1:n.description1,description2:n.description2,oldPrice:n.oldPrice,newPrice:n.newPrice,fullDescription:n.fullDescription,hasDiscount:n.hasDiscount,priority:y<6,previewMode:s},n.id)):d?null:e.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"40px",color:"#4A2C1A"},children:e.jsxs("p",{children:['Nenhum produto encontrado para "',u,'"']})})})]})},Q=!s&&!j;return e.jsxs(e.Fragment,{children:[e.jsx("main",{className:`main-content ${C?"with-cart-modal":""} ${Q?"restoring-scroll":""}`,ref:o,children:d?e.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#4A2C1A"},children:e.jsx("p",{children:"Carregando produtos..."})}):Y()}),C&&e.jsx(Zs,{isExiting:T})]})}const _e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11%208C11%207.44772%2011.4477%207%2012%207C12.5523%207%2013%207.44772%2013%208V11H16C16.5523%2011%2017%2011.4477%2017%2012C17%2012.5523%2016.5523%2013%2016%2013H13V16C13%2016.5523%2012.5523%2017%2012%2017C11.4477%2017%2011%2016.5523%2011%2016V13H8C7.44771%2013%207%2012.5523%207%2012C7%2011.4477%207.44772%2011%208%2011H11V8Z'%20fill='%230F0F0F'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M23%2012C23%2018.0751%2018.0751%2023%2012%2023C5.92487%2023%201%2018.0751%201%2012C1%205.92487%205.92487%201%2012%201C18.0751%201%2023%205.92487%2023%2012ZM3.00683%2012C3.00683%2016.9668%207.03321%2020.9932%2012%2020.9932C16.9668%2020.9932%2020.9932%2016.9668%2020.9932%2012C20.9932%207.03321%2016.9668%203.00683%2012%203.00683C7.03321%203.00683%203.00683%207.03321%203.00683%2012Z'%20fill='%230F0F0F'/%3e%3c/svg%3e";function Ys(){const s=me(),{productId:o}=ze(),{cartItems:a,addToCart:u,removeFromCart:c,getItemQuantity:p}=fe(),[l,g]=t.useState([]),[v,h]=t.useState(!0),[w,x]=t.useState(""),[d,r]=t.useState(""),[C,I]=t.useState(new Set),[T,D]=t.useState("0,00"),j=t.useRef(null),i=t.useRef("0,00"),[b,$]=t.useState(!1),[z,Y]=t.useState(!1),Q=t.useRef(0),[n,y]=t.useState(!1),[L]=t.useState(["7028cc82-ad0c-49b2-954a-62efa28de896","d72803b0-bf5a-417a-9bff-29e00bc28b4b","de89616b-5ca8-4582-8985-c91c80d68f57","8b41fd0e-bf2b-4e2f-a0d9-0d0115b1310f","61b7a3a7-beee-4137-b2dc-0ed46e4c0dbe"]),P=t.useRef(null),k=t.useRef(!1),S=t.useRef(0),R=t.useRef(0),_=t.useRef(0),O=t.useRef(!1),te=t.useRef(null),F=t.useRef(new Set);t.useLayoutEffect(()=>{document.documentElement.scrollTop=0,document.body.scrollTop=0,window.scrollTo(0,0)},[]),t.useEffect(()=>{G(null,null,function*(){try{h(!0);const m=yield Ne();g(m)}catch(m){console.error("Erro ao carregar produtos:",m)}finally{h(!1)}})},[]),t.useEffect(()=>{if(o&&l.length>0&&te.current!==o){if(F.current.has(o))return;const N=l.find(f=>f.id===o),m=p(o);N&&m===0&&(u(o),te.current=o,sessionStorage.removeItem("comingFromContinuePurchase"))}},[o,l,p,u]);const B=t.useMemo(()=>l.filter(N=>p(N.id)>0),[l,a,p]);t.useEffect(()=>{const N=B.length,m=Q.current;if(N===2&&m===1){Y(!0);const f=setTimeout(()=>{Y(!1)},400);return Q.current=N,()=>clearTimeout(f)}else N===0?(Y(!1),Q.current=0):(N===1&&m>1&&Y(!1),Q.current=N)},[B.length]);const le=t.useMemo(()=>{if(L.length===0)return[];const N=new Map;return l.forEach(m=>{L.includes(m.id)&&N.set(m.id,m)}),L.map(m=>N.get(m)).filter(m=>m!==void 0)},[l,L]),K=t.useMemo(()=>{if(a.length===0)return"0,00";let N=0;return a.forEach(m=>{const f=l.find(E=>E.id===m.productId);if(f){const E=f.newPrice.replace(/R\$\s*/g,"").replace(/\./g,"").replace(",",".").trim(),q=parseFloat(E)||0;N+=q*m.quantity}}),N.toFixed(2).replace(".",",")},[a,l]);t.useEffect(()=>{!v&&K!==T&&i.current==="0,00"&&(D(K),i.current=K)},[v,K,T]),t.useEffect(()=>{if(K===i.current)return;j.current&&cancelAnimationFrame(j.current);const N=parseFloat(K.replace(",","."))||0,m=parseFloat(i.current.replace(",","."))||0;i.current=K;const f=600,E=Date.now(),q=()=>{const Z=Date.now()-E,ie=Math.min(Z/f,1),Ke=1-Math.pow(1-ie,3),es=(m+(N-m)*Ke).toFixed(2).replace(".",",");D(es),ie<1?j.current=requestAnimationFrame(q):(D(K),j.current=null)};return j.current=requestAnimationFrame(q),()=>{j.current&&cancelAnimationFrame(j.current)}},[K]);const ne=N=>{const f=B.length===1;u(N);const E=L.includes(N);I(q=>{const Z=new Set(q);return Z.add(N),Z}),setTimeout(()=>{I(q=>{const Z=new Set(q);return Z.delete(N),Z}),E&&!f&&(y(!0),setTimeout(()=>{y(!1)},600))},300)},U=N=>{F.current.add(N),te.current===N&&(te.current=null),c(N)},oe=()=>{console.log("Aplicar cupom:",w)},ee=()=>{sessionStorage.setItem("navigationActive","true"),s("/")},se=()=>{sessionStorage.setItem("navigationActive","true"),s("/")},ae=()=>{s("/checkout/identification")},H=N=>{N.target.closest("button")||P.current&&(O.current=!0,_.current=N.clientX,k.current=!1,S.current=N.pageX-P.current.offsetLeft,R.current=P.current.scrollLeft)},A=()=>{P.current&&(O.current=!1,k.current=!1,P.current.style.cursor="grab",P.current.style.userSelect="auto")},V=()=>{P.current&&(O.current=!1,k.current=!1,P.current.style.cursor="grab",P.current.style.userSelect="auto")},W=N=>{if(!(!P.current||!O.current)&&(k.current||Math.abs(N.clientX-_.current)>10&&(k.current=!0,P.current.style.cursor="grabbing",P.current.style.userSelect="none"),k.current)){N.preventDefault(),N.stopPropagation();const f=(N.pageX-P.current.offsetLeft-S.current)*2;P.current.scrollLeft=R.current-f}};return v?e.jsxs("main",{className:"checkout-content",children:[e.jsxs("div",{className:"checkout-header",children:[e.jsx("h1",{className:"checkout-title",children:"Finalizar pedido"}),e.jsx("button",{className:"checkout-back-btn",onClick:se,"aria-label":"Voltar",children:e.jsx("svg",{className:"checkout-back-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20.7457 3.32851C20.3552 2.93798 19.722 2.93798 19.3315 3.32851L12.0371 10.6229L4.74275 3.32851C4.35223 2.93798 3.71906 2.93798 3.32854 3.32851C2.93801 3.71903 2.93801 4.3522 3.32854 4.74272L10.6229 12.0371L3.32856 19.3314C2.93803 19.722 2.93803 20.3551 3.32856 20.7457C3.71908 21.1362 4.35225 21.1362 4.74277 20.7457L12.0371 13.4513L19.3315 20.7457C19.722 21.1362 20.3552 21.1362 20.7457 20.7457C21.1362 20.3551 21.1362 19.722 20.7457 19.3315L13.4513 12.0371L20.7457 4.74272C21.1362 4.3522 21.1362 3.71903 20.7457 3.32851Z",fill:"#ff8d85"})})})]}),e.jsx("div",{className:"checkout-empty",children:e.jsx("p",{children:"Carregando produtos..."})})]}):B.length===0?e.jsxs("main",{className:"checkout-content",children:[e.jsxs("div",{className:"checkout-header",children:[e.jsx("h1",{className:"checkout-title",children:"Finalizar pedido"}),e.jsx("button",{className:"checkout-back-btn",onClick:se,"aria-label":"Voltar",children:e.jsx("svg",{className:"checkout-back-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20.7457 3.32851C20.3552 2.93798 19.722 2.93798 19.3315 3.32851L12.0371 10.6229L4.74275 3.32851C4.35223 2.93798 3.71906 2.93798 3.32854 3.32851C2.93801 3.71903 2.93801 4.3522 3.32854 4.74272L10.6229 12.0371L3.32856 19.3314C2.93803 19.722 2.93803 20.3551 3.32856 20.7457C3.71908 21.1362 4.35225 21.1362 4.74277 20.7457L12.0371 13.4513L19.3315 20.7457C19.722 21.1362 20.3552 21.1362 20.7457 20.7457C21.1362 20.3551 21.1362 19.722 20.7457 19.3315L13.4513 12.0371L20.7457 4.74272C21.1362 4.3522 21.1362 3.71903 20.7457 3.32851Z",fill:"#ff8d85"})})})]}),e.jsx("div",{className:"checkout-empty",children:e.jsx("p",{children:"Seu carrinho est√° vazio"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"checkout-content",children:[e.jsxs("div",{className:"checkout-header",children:[e.jsx("h1",{className:"checkout-title",children:"Finalizar pedido"}),e.jsx("button",{className:"checkout-back-btn",onClick:se,"aria-label":"Voltar",children:e.jsx("svg",{className:"checkout-back-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20.7457 3.32851C20.3552 2.93798 19.722 2.93798 19.3315 3.32851L12.0371 10.6229L4.74275 3.32851C4.35223 2.93798 3.71906 2.93798 3.32854 3.32851C2.93801 3.71903 2.93801 4.3522 3.32854 4.74272L10.6229 12.0371L3.32856 19.3314C2.93803 19.722 2.93803 20.3551 3.32856 20.7457C3.71908 21.1362 4.35225 21.1362 4.74277 20.7457L12.0371 13.4513L19.3315 20.7457C19.722 21.1362 20.3552 21.1362 20.7457 20.7457C21.1362 20.3551 21.1362 19.722 20.7457 19.3315L13.4513 12.0371L20.7457 4.74272C21.1362 4.3522 21.1362 3.71903 20.7457 3.32851Z",fill:"#ff8d85"})})})]}),e.jsxs("div",{className:`checkout-modal ${z?"modal-grow":""} ${n?"modal-elastic-bounce":""}`,children:[e.jsx("div",{className:`checkout-items-wrapper ${b?"expanded":""} ${B.length===1?"single-item":""}`,children:e.jsx("div",{className:"checkout-items",children:B.map(N=>{const m=p(N.id),f=re[N.image]||re.product1;return e.jsxs("div",{className:"checkout-item",children:[e.jsx("img",{src:f,alt:N.title,className:"checkout-item-image"}),e.jsxs("div",{className:"checkout-item-info",children:[e.jsx("div",{className:"checkout-title-wrapper",children:e.jsx("h3",{className:"checkout-item-title",children:N.title})}),e.jsxs("div",{className:"checkout-item-price",children:[N.hasDiscount&&N.oldPrice&&N.oldPrice.trim()!==""&&N.oldPrice!==N.newPrice&&e.jsx("span",{className:"checkout-price-old",children:de(N.oldPrice)}),e.jsx("span",{className:"checkout-price-new",children:de(N.newPrice)})]}),e.jsxs("div",{className:"checkout-item-quantity",children:[e.jsx("span",{className:"quantity-label",children:"Quantidade:"}),e.jsx("span",{className:`quantity-value ${C.has(N.id)?"scale-up":""}`,children:m})]})]}),e.jsxs("div",{className:"checkout-item-actions",children:[e.jsx("button",{className:"checkout-action-btn checkout-add-btn",onClick:()=>ne(N.id),"aria-label":"Adicionar produto",children:e.jsx("img",{src:_e,alt:"Adicionar",className:"checkout-action-icon"})}),e.jsx("button",{className:"checkout-action-btn checkout-trash-btn",onClick:()=>U(N.id),"aria-label":"Remover produto",children:e.jsx("img",{src:Fe,alt:"Remover",className:"checkout-action-icon"})})]})]},N.id)})})}),B.length>=2&&e.jsxs("button",{className:"checkout-expand-btn",onClick:()=>$(!b),"aria-label":b?"Recolher":"Expandir",children:[e.jsx("svg",{className:`checkout-expand-icon ${b?"expanded":""}`,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9 13L12 16M12 16L15 13M12 16V8M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("span",{className:"checkout-expand-text",children:b?"Ver menos":"Ver mais"})]})]}),le.length>0&&e.jsxs("div",{className:"checkout-also-order",children:[e.jsx("h3",{className:"checkout-section-title",children:"Pe√ßa tamb√©m"}),e.jsx("div",{className:"checkout-also-order-content",children:e.jsx("div",{className:"checkout-also-order-grid",ref:P,onMouseDown:H,onMouseLeave:A,onMouseUp:V,onMouseMove:W,children:le.map(N=>{const m=re[N.image]||re.product1;return e.jsxs("div",{className:"checkout-also-order-item",onMouseDown:f=>{f.target.closest("button")||P.current&&(O.current=!0,_.current=f.clientX,S.current=f.pageX-P.current.offsetLeft,R.current=P.current.scrollLeft)},onMouseMove:f=>{if(!(!P.current||!O.current)&&(k.current||Math.abs(f.clientX-_.current)>10&&(k.current=!0,P.current.style.cursor="grabbing",P.current.style.userSelect="none"),k.current)){f.preventDefault(),f.stopPropagation();const q=(f.pageX-P.current.offsetLeft-S.current)*2;P.current.scrollLeft=R.current-q}},onMouseUp:()=>{P.current&&(O.current=!1,k.current=!1,P.current.style.cursor="grab",P.current.style.userSelect="auto")},onMouseLeave:()=>{P.current&&(O.current=!1,k.current=!1,P.current.style.cursor="grab",P.current.style.userSelect="auto")},onClick:f=>{if(f.target.closest("button"))return;const q=Math.abs(f.clientX-_.current);if(!k.current&&q<10){const Z=window.scrollY||document.documentElement.scrollTop;Z>0&&sessionStorage.setItem("homeScrollPosition",Z.toString()),sessionStorage.setItem("navigationActive","true"),s(`/product/${N.id}`,{state:{fromCheckout:!0}})}},children:[e.jsx("img",{src:m,alt:N.title,className:"checkout-also-order-image"}),e.jsxs("div",{className:"checkout-also-order-info",children:[e.jsx("h4",{className:"checkout-also-order-title",children:N.title}),e.jsxs("div",{className:"checkout-also-order-price",children:[N.hasDiscount&&N.oldPrice&&N.oldPrice.trim()!==""&&N.oldPrice!==N.newPrice&&e.jsx("span",{className:"checkout-also-order-price-old",children:de(N.oldPrice)}),e.jsx("span",{className:"checkout-also-order-price-new",children:de(N.newPrice)})]})]}),e.jsx("button",{className:"checkout-also-order-add-btn",onClick:f=>{f.stopPropagation(),ne(N.id)},"aria-label":"Adicionar ao carrinho",children:e.jsx("img",{src:_e,alt:"Adicionar",className:"checkout-also-order-add-icon"})})]},N.id)})})})]}),e.jsxs("div",{className:"checkout-coupon",children:[e.jsxs("h3",{className:"checkout-section-title",children:["Aplicar cupom",e.jsx("span",{className:"checkout-optional",children:"(Opcional)"})]}),e.jsxs("div",{className:"checkout-coupon-input-wrapper",children:[e.jsx("svg",{className:"checkout-coupon-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:e.jsx("path",{d:"M2.5 5L10 10L17.5 5M2.5 15H17.5V5H2.5V15Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("input",{type:"text",className:"checkout-coupon-input",placeholder:"C√≥digo do cupom",value:w,onChange:N=>x(N.target.value)})]}),e.jsx("button",{className:"checkout-coupon-btn",onClick:oe,children:"Aplicar cupom"})]}),e.jsxs("div",{className:"checkout-total",children:[e.jsx("span",{className:"checkout-total-label",children:"Total"}),e.jsxs("span",{className:"checkout-total-value",children:["R$ ",T]})]}),e.jsxs("div",{className:"checkout-observations",children:[e.jsx("h3",{className:"checkout-section-title",children:"Observa√ß√µes?"}),e.jsx("input",{type:"text",className:"checkout-observations-input",placeholder:"Observa√ß√µes sobre o pedido",value:d,onChange:N=>r(N.target.value)})]})]}),e.jsx("div",{className:"checkout-finish-button-container",children:e.jsxs("div",{className:"checkout-buttons-wrapper",children:[e.jsx("button",{className:"checkout-btn-secondary",onClick:ee,children:"Adicionar mais itens"}),e.jsx("button",{className:"checkout-finish-button",onClick:ae,children:e.jsx("div",{className:"checkout-finish-content",children:e.jsx("span",{children:"Pr√≥ximo"})})})]})})]})}function Xs(){const s=me(),{getItemQuantity:o,addToCart:a,removeFromCart:u}=fe(),{searchTerm:c}=ge(),[p,l]=t.useState([]),[g,v]=t.useState(!0),[h,w]=t.useState(new Set),[x,d]=t.useState(new Set);t.useLayoutEffect(()=>{document.documentElement.scrollTop=0,document.body.scrollTop=0,window.scrollTo(0,0)},[]);const r=()=>{sessionStorage.setItem("navigationActive","true"),s("/")},C=i=>{a(i),w(b=>{const $=new Set(b);return $.delete(i),$}),d(b=>{const $=new Set(b);return $.add(i),$}),setTimeout(()=>{d(b=>{const $=new Set(b);return $.delete(i),$})},300)},I=i=>{o(i)===1?(w($=>new Set($).add(i)),setTimeout(()=>{u(i),w($=>{const z=new Set($);return z.delete(i),z})},300)):u(i)};t.useEffect(()=>{G(null,null,function*(){v(!0);const b=yield Ne();l(b),v(!1)})},[]);const T=t.useMemo(()=>p.filter(i=>o(i.id)>0||h.has(i.id)),[p,o,h]),D=t.useMemo(()=>{if(!c.trim())return T;const i=c.toUpperCase();return T.filter(b=>{var Q,n;const $=b.title.toUpperCase().indexOf(i)>-1,z=((Q=b.description1)==null?void 0:Q.toUpperCase().indexOf(i))>-1,Y=((n=b.description2)==null?void 0:n.toUpperCase().indexOf(i))>-1;return $||z||Y})},[T,c]);if(g)return e.jsxs("main",{className:"cart-content",children:[e.jsxs("div",{className:"cart-header",children:[e.jsx("h1",{className:"cart-title",children:"Carrinho"}),e.jsx("button",{className:"cart-back-btn",onClick:r,"aria-label":"Voltar",children:e.jsx("svg",{className:"cart-back-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20.7457 3.32851C20.3552 2.93798 19.722 2.93798 19.3315 3.32851L12.0371 10.6229L4.74275 3.32851C4.35223 2.93798 3.71906 2.93798 3.32854 3.32851C2.93801 3.71903 2.93801 4.3522 3.32854 4.74272L10.6229 12.0371L3.32856 19.3314C2.93803 19.722 2.93803 20.3551 3.32856 20.7457C3.71908 21.1362 4.35225 21.1362 4.74277 20.7457L12.0371 13.4513L19.3315 20.7457C19.722 21.1362 20.3552 21.1362 20.7457 20.7457C21.1362 20.3551 21.1362 19.722 20.7457 19.3315L13.4513 12.0371L20.7457 4.74272C21.1362 4.3522 21.1362 3.71903 20.7457 3.32851Z",fill:"#ff8d85"})})})]}),e.jsx("div",{className:"cart-empty",children:e.jsx("p",{children:"Carregando produtos..."})})]});if(D.length===0){const i=T.length===0;return e.jsxs("main",{className:"cart-content",children:[e.jsxs("div",{className:"cart-header",children:[e.jsx("h1",{className:"cart-title",children:"Carrinho"}),e.jsx("button",{className:"cart-back-btn",onClick:r,"aria-label":"Voltar",children:e.jsx("svg",{className:"cart-back-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20.7457 3.32851C20.3552 2.93798 19.722 2.93798 19.3315 3.32851L12.0371 10.6229L4.74275 3.32851C4.35223 2.93798 3.71906 2.93798 3.32854 3.32851C2.93801 3.71903 2.93801 4.3522 3.32854 4.74272L10.6229 12.0371L3.32856 19.3314C2.93803 19.722 2.93803 20.3551 3.32856 20.7457C3.71908 21.1362 4.35225 21.1362 4.74277 20.7457L12.0371 13.4513L19.3315 20.7457C19.722 21.1362 20.3552 21.1362 20.7457 20.7457C21.1362 20.3551 21.1362 19.722 20.7457 19.3315L13.4513 12.0371L20.7457 4.74272C21.1362 4.3522 21.1362 3.71903 20.7457 3.32851Z",fill:"#ff8d85"})})})]}),e.jsx("div",{className:"cart-empty",children:e.jsx("p",{children:i?"Seu carrinho est√° vazio":`Nenhum produto encontrado para "${c}"`})}),e.jsx("div",{className:"cart-add-button-container",children:e.jsxs("button",{className:"cart-add-button",onClick:r,children:[e.jsx("img",{src:Ie,alt:"Adicionar",className:"cart-add-icon"}),"Adicionar"]})})]})}const j=()=>{s("/checkout")};return e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"cart-content",children:[e.jsxs("div",{className:"cart-header",children:[e.jsx("h1",{className:"cart-title",children:"Carrinho"}),e.jsx("button",{className:"cart-back-btn",onClick:r,"aria-label":"Voltar",children:e.jsx("svg",{className:"cart-back-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20.7457 3.32851C20.3552 2.93798 19.722 2.93798 19.3315 3.32851L12.0371 10.6229L4.74275 3.32851C4.35223 2.93798 3.71906 2.93798 3.32854 3.32851C2.93801 3.71903 2.93801 4.3522 3.32854 4.74272L10.6229 12.0371L3.32856 19.3314C2.93803 19.722 2.93803 20.3551 3.32856 20.7457C3.71908 21.1362 4.35225 21.1362 4.74277 20.7457L12.0371 13.4513L19.3315 20.7457C19.722 21.1362 20.3552 21.1362 20.7457 20.7457C21.1362 20.3551 21.1362 19.722 20.7457 19.3315L13.4513 12.0371L20.7457 4.74272C21.1362 4.3522 21.1362 3.71903 20.7457 3.32851Z",fill:"#ff8d85"})})})]}),e.jsx("div",{className:`cart-modal ${h.size>0?"shrinking":""}`,children:e.jsx("div",{className:"cart-items",children:D.map(i=>{const b=o(i.id),$=h.has(i.id),z=re[i.image]||i.image||re.product1;return e.jsxs("div",{className:`cart-item ${$?"removing":""}`,children:[e.jsx("img",{src:z,alt:i.title,className:"cart-item-image"}),e.jsxs("div",{className:"cart-item-info",children:[e.jsx("div",{className:"cart-title-wrapper",children:e.jsx("h3",{className:"cart-item-title",children:i.title})}),e.jsxs("div",{className:"cart-item-price",children:[i.hasDiscount&&i.oldPrice&&i.oldPrice.trim()!==""&&i.oldPrice!==i.newPrice&&e.jsx("span",{className:"cart-price-old",children:de(i.oldPrice)}),e.jsx("span",{className:"cart-price-new",children:de(i.newPrice)})]}),e.jsxs("div",{className:"cart-item-quantity",children:[e.jsx("span",{className:"quantity-label",children:"Quantidade:"}),e.jsx("span",{className:`quantity-value ${x.has(i.id)?"scale-up":""}`,children:b})]})]}),e.jsxs("div",{className:"cart-item-actions",children:[e.jsx("button",{className:"cart-action-btn cart-add-btn",onClick:()=>C(i.id),"aria-label":"Adicionar produto",children:e.jsx("img",{src:_e,alt:"Adicionar",className:"cart-action-icon"})}),e.jsx("button",{className:"cart-action-btn cart-trash-btn",onClick:()=>I(i.id),"aria-label":"Remover produto",children:e.jsx("img",{src:Fe,alt:"Remover",className:"cart-action-icon"})})]})]},i.id)})})}),e.jsx("div",{className:"cart-add-button-container",children:e.jsxs("button",{className:"cart-add-button",onClick:r,children:[e.jsx("img",{src:Ie,alt:"Adicionar",className:"cart-add-icon"}),"Adicionar"]})})]}),e.jsx("div",{className:"cart-finish-button-container",children:e.jsx("button",{className:"cart-finish-button",onClick:j,children:e.jsx("div",{className:"cart-finish-content",children:e.jsx("span",{children:"Finalizar pedido"})})})})]})}const Te="data:image/svg+xml,%3csvg%20height='512'%20viewBox='0%200%2032%2032'%20width='512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Arrow_Outline'%20data-name='Arrow%20Outline'%3e%3cpath%20d='m19.5078%208.3394h-11.5585l1.1722-1.7419a1.5326%201.5326%200%200%200%20-1.2683-2.3931h-.0032a1.67%201.67%200%200%200%20-1.3042.6268l-3.6065%204.5088a.8.8%200%200%200%200%20.9995l3.6069%204.5085a1.67%201.67%200%200%200%201.3042.6269h.0028a1.5326%201.5326%200%200%200%201.2683-2.393l-1.1725-1.7425h11.5588a6.728%206.728%200%201%201%200%2013.456h-3.2715a1.5%201.5%200%200%200%200%203h3.2715a9.728%209.728%200%201%200%200-19.456z'/%3e%3c/g%3e%3c/svg%3e",Js="/assets/png/empty-wooden-table-top-isolated-white-background-used-display-montage-your-products-JErrZ_Pk.png";function Ks(){const s=me(),{cartItems:o,getItemQuantity:a}=fe(),{isSearchOpen:u,setIsSearchOpen:c,setSearchTerm:p}=ge(),[l,g]=t.useState([]),[v,h]=t.useState(!1),w=t.useRef(null),x=t.useRef(null),d=t.useRef(null),r=t.useRef(null),[C,I]=t.useState(!1),[T,D]=t.useState(!1),[j,i]=t.useState({fullName:"",email:"",phone:"",cpf:"",cep:"",street:"",number:"",hasNoNumber:!1,neighborhood:"",complement:"",city:"",state:""}),[b,$]=t.useState("free"),[z,Y]=t.useState(!1),[Q,n]=t.useState(!1),[y,L]=t.useState(!1),[P,k]=t.useState(null),[S,R]=t.useState(!1),[_,O]=t.useState(!1),[te,F]=t.useState(!0),B=["gmail.com","live.com","hotmail.com","outlook.com","yahoo.com","uol.com.br","bol.com.br","ig.com.br","terra.com.br"];t.useLayoutEffect(()=>{document.documentElement.scrollTop=0,document.body.scrollTop=0,window.scrollTo(0,0)},[]),t.useEffect(()=>{G(null,null,function*(){try{const f=yield Ne();g(f)}catch(f){console.error("Erro ao carregar produtos:",f)}})},[]);const le=t.useMemo(()=>{if(o.length===0)return"0,00";let m=0;return o.forEach(f=>{const E=l.find(q=>q.id===f.productId);if(E){const q=E.newPrice.replace(/R\$\s*/g,"").replace(/\./g,"").replace(",",".").trim(),Z=parseFloat(q)||0;m+=Z*f.quantity}}),m.toFixed(2).replace(".",",")},[o,l]),K=m=>{const E=m.replace(/\D/g,"").slice(0,11);return E.length<=2?E:E.length<=7?`${E.slice(0,2)} ${E.slice(2)}`:E.length<=10?`${E.slice(0,2)} ${E.slice(2,6)}-${E.slice(6)}`:`${E.slice(0,2)} ${E.slice(2,7)}-${E.slice(7)}`},ne=m=>{const E=m.replace(/\D/g,"").slice(0,11);return E.length<=3?E:E.length<=6?`${E.slice(0,3)}.${E.slice(3)}`:E.length<=9?`${E.slice(0,3)}.${E.slice(3,6)}.${E.slice(6)}`:`${E.slice(0,3)}.${E.slice(3,6)}.${E.slice(6,9)}-${E.slice(9)}`},U=m=>{const E=m.replace(/\D/g,"").slice(0,8);return E.length<=5?E:`${E.slice(0,5)}-${E.slice(5)}`},oe=m=>G(null,null,function*(){if(m.length===8){R(!0),O(!1);try{const E=yield(yield fetch(`https://viacep.com.br/ws/${m}/json/`)).json();E.erro?(O(!0),k(null),F(!0)):(F(!1),setTimeout(()=>{k(E),O(!1),i(q=>J(X({},q),{street:E.logradouro||"",neighborhood:E.bairro||"",city:E.localidade||"",state:E.uf||""}))},300))}catch(f){console.error("Erro ao buscar CEP:",f),O(!0),k(null)}finally{R(!1)}}}),ee=m=>{const{name:f,value:E}=m.target;if(f==="fullName"){const q=E.replace(/[^a-zA-Z√Ä-√ø\s]/g,"");i(Z=>J(X({},Z),{[f]:q}));return}if(f==="phone"){const Z=E.replace(/\D/g,"").slice(0,11);i(ie=>J(X({},ie),{[f]:Z}));return}if(f==="cpf"){const Z=E.replace(/\D/g,"").slice(0,11);i(ie=>J(X({},ie),{[f]:Z}));return}if(f==="cep"){const Z=E.replace(/\D/g,"").slice(0,8);i(ie=>J(X({},ie),{[f]:Z})),Z.length===8?(oe(Z),setTimeout(()=>{var ie;(ie=r.current)==null||ie.blur()},100)):(k(null),O(!1),F(!0));return}if(i(q=>J(X({},q),{[f]:E})),f==="email"&&E.length>0&&!E.includes("@"))I(!0);else if(f==="email"&&E.includes("@")){const[q,Z]=E.split("@");q&&Z&&Z.length>0?I(!0):I(!!(q&&!Z))}else f==="email"&&E.length===0&&I(!1)},se=t.useMemo(()=>{if(!j.email||j.email.length===0)return[];const m=j.email.toLowerCase();if(!m.includes("@"))return B.map(q=>`${m}@${q}`);const[f,E]=m.split("@");return!f||f.length===0?[]:E&&E.length>0?B.filter(q=>q.startsWith(E)).map(q=>`${f}@${q}`):B.map(q=>`${f}@${q}`)},[j.email]);t.useEffect(()=>{if(j.email&&se.length>0&&C){const m=j.email.toLowerCase();se.some(E=>E.toLowerCase()===m)&&(D(!0),setTimeout(()=>{I(!1),D(!1)},300))}},[j.email,se,C]);const ae=m=>{var f;i(E=>J(X({},E),{email:m})),D(!0),setTimeout(()=>{I(!1),D(!1)},300),(f=x.current)==null||f.focus()};t.useEffect(()=>{const m=f=>{w.current&&!w.current.contains(f.target)&&h(!1),d.current&&!d.current.contains(f.target)&&x.current&&!x.current.contains(f.target)&&I(!1)};return(v||C)&&document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[v,C]);const H=t.useMemo(()=>o.map(f=>l.find(q=>q.id===f.productId)).filter(f=>f!==void 0),[l,o]),A=()=>{z?Y(!1):s("/checkout")},V=m=>{m.preventDefault(),h(!v)},W=t.useMemo(()=>{const m=j.phone.replace(/\D/g,""),f=j.cpf.replace(/\D/g,""),E=j.cep.replace(/\D/g,""),q=j.email.trim()!==""&&j.email.includes("@")&&j.email.includes(".")&&!j.email.endsWith("@")&&!j.email.endsWith("."),Z=j.fullName.trim()!==""&&q&&m.length>=10&&f.length===11&&E.length===8&&P!==null&&!_;if(P&&!_){const ie=(j.number.trim()!==""||j.hasNoNumber)&&j.neighborhood.trim()!==""&&j.city.trim()!==""&&j.state.trim()!==""&&b!==null;return Z&&ie}return!1},[j,P,_,b]);t.useEffect(()=>{W&&y&&L(!1)},[W,y]),t.useEffect(()=>{if(y){const m=setTimeout(()=>{L(!1)},8e3);return()=>clearTimeout(m)}},[y]),t.useEffect(()=>{if(z){window.scrollTo({top:0,behavior:"smooth"});const m=setTimeout(()=>{n(!0)},500);return()=>clearTimeout(m)}else n(!1)},[z]);const N=()=>{if(!W){L(!0);return}L(!1),console.log("Continuar para pagamento"),Y(!0),window.scrollTo({top:0,behavior:"smooth"})};return e.jsxs("div",{className:"identification-page",children:[e.jsx("header",{className:"identification-header",children:e.jsxs("div",{className:"identification-header-content",children:[e.jsx("div",{className:"identification-logo",children:e.jsx("div",{className:"identification-logo-circle",children:e.jsx("img",{src:qe,alt:"Queijaria do Mineiro",className:"identification-logo-image"})})}),e.jsxs("div",{className:"identification-total",ref:w,children:[e.jsxs("div",{className:"identification-total-row",children:[e.jsxs("div",{className:"identification-total-price",children:[e.jsx("span",{className:"identification-currency",children:"R$"}),e.jsx("span",{className:"identification-value",children:le})]}),e.jsxs("div",{className:"identification-cart-icon",children:[e.jsx("img",{src:De,alt:"Carrinho",className:"identification-cart-icon-image"}),o.length>0&&e.jsx("span",{className:"identification-cart-count",children:o.reduce((m,f)=>m+f.quantity,0)})]})]}),e.jsxs("div",{className:"identification-cart-row",children:[e.jsx("button",{className:`identification-cart-link ${v?"active":""}`,onClick:V,type:"button",children:"ver carrinho"}),e.jsx("span",{className:`identification-cart-arrow ${v?"open":""}`,onClick:V,children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:e.jsx("path",{d:"M3 4.5L6 7.5L9 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),v&&e.jsx("div",{className:"identification-cart-dropdown",children:H.length===0?e.jsx("div",{className:"identification-cart-dropdown-empty",children:e.jsx("p",{children:"Carrinho vazio"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`identification-cart-dropdown-items ${H.length>4?"identification-cart-dropdown-items-masked":""}`,children:H.slice(0,H.length>4?5:H.length).map((m,f)=>{const E=a(m.id),q=re[m.image]||re.product1,Z=H.length>4&&f===4;return e.jsxs("div",{className:`identification-cart-dropdown-item ${Z?"identification-cart-dropdown-item-partial":""}`,children:[e.jsx("img",{src:q,alt:m.title,className:"identification-cart-dropdown-image"}),e.jsxs("div",{className:"identification-cart-dropdown-info",children:[e.jsx("div",{className:"identification-cart-dropdown-title",children:m.title}),e.jsxs("div",{className:"identification-cart-dropdown-details",children:[e.jsx("span",{className:"identification-cart-dropdown-price",children:de(m.newPrice)}),e.jsxs("span",{className:"identification-cart-dropdown-quantity",children:["Qtd: ",E]})]})]})]},m.id)})}),H.length>4&&e.jsx("div",{className:"identification-cart-dropdown-footer",children:e.jsx("button",{className:"identification-cart-dropdown-button",onClick:()=>{h(!1),u&&(c(!1),p("")),s("/cart")},children:"Ver carrinho completo"})})]})})]})]})}),e.jsx("div",{className:"identification-header-divider"}),e.jsxs("div",{className:"identification-progress-wrapper",children:[e.jsx("button",{className:"identification-back-icon-btn",onClick:A,"aria-label":"Voltar",children:e.jsx("img",{src:Te,alt:"Voltar",className:"identification-back-icon"})}),e.jsxs("div",{className:"identification-progress",children:[e.jsxs("div",{className:`identification-step ${z?"":"identification-step-active"} ${z?"identification-step-clickable":""}`,onClick:z?()=>Y(!1):void 0,style:z?{cursor:"pointer"}:void 0,children:[e.jsx("div",{className:"identification-step-number",children:"1"}),e.jsx("div",{className:"identification-step-label",children:"IDENTIFICA√á√ÉO"})]}),e.jsxs("div",{className:`identification-step ${z?"identification-step-active":""} ${!z&&W?"identification-step-clickable":""} ${!z&&!W?"identification-step-disabled":""}`,onClick:z?void 0:()=>{W?N():L(!0)},style:!z&&W?{cursor:"pointer"}:{cursor:"not-allowed"},children:[e.jsx("div",{className:"identification-step-number",children:"2"}),e.jsx("div",{className:"identification-step-label",children:"PAGAMENTO"})]})]})]}),e.jsx("main",{className:"identification-content",children:e.jsxs("div",{className:"identification-transition-container",children:[!Q&&e.jsx("div",{className:`identification-form-section ${z?"slide-out-left":""}`,children:e.jsxs("div",{className:"identification-section",children:[e.jsxs("div",{className:"identification-section-header",children:[e.jsx("h2",{className:"identification-section-title",children:"Dados pessoais"}),y&&!W&&e.jsx("span",{className:"identification-validation-error",children:"*Preencha para continuar*"})]}),e.jsxs("div",{className:"identification-form",children:[e.jsx("div",{className:"identification-input-group",children:e.jsx("input",{type:"text",name:"fullName",className:"identification-input",placeholder:"Nome completo",value:j.fullName,onChange:ee})}),e.jsxs("div",{className:"identification-input-group",ref:d,children:[e.jsxs("svg",{className:"identification-input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"m19 20.5h-14a4.00427 4.00427 0 0 1 -4-4v-9a4.00427 4.00427 0 0 1 4-4h14a4.00427 4.00427 0 0 1 4 4v9a4.00427 4.00427 0 0 1 -4 4zm-14-15a2.00229 2.00229 0 0 0 -2 2v9a2.00229 2.00229 0 0 0 2 2h14a2.00229 2.00229 0 0 0 2-2v-9a2.00229 2.00229 0 0 0 -2-2z",fill:"currentColor"}),e.jsx("path",{d:"m12 13.43359a4.99283 4.99283 0 0 1 -3.07031-1.0542l-6.544-5.08984a1.00035 1.00035 0 0 1 1.22852-1.5791l6.54394 5.08984a2.99531 2.99531 0 0 0 3.6836 0l6.54394-5.08984a1.00035 1.00035 0 0 1 1.22852 1.5791l-6.544 5.08984a4.99587 4.99587 0 0 1 -3.07021 1.0542z",fill:"currentColor"})]}),e.jsx("input",{ref:x,type:"email",name:"email",className:"identification-input identification-input-with-icon",placeholder:"E-mail",value:j.email,onChange:ee,onFocus:()=>{j.email.length>0&&se.length>0&&I(!0)}}),C&&se.length>0&&e.jsx("div",{className:`identification-email-dropdown ${T?"closing":""}`,children:se.map((m,f)=>e.jsx("button",{type:"button",className:"identification-email-suggestion",onClick:()=>ae(m),children:m},f))})]}),e.jsxs("div",{className:"identification-input-group",children:[e.jsxs("svg",{className:"identification-input-icon",width:"20",height:"20",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"m24 2h-10c-2.21 0-4 1.79-4 4v5c0 .55.45 1 1 1s1-.45 1-1v-5c0-1.1.9-2 2-2v1c0 1.65 1.35 3 3 3h4c1.65 0 3-1.35 3-3v-1c1.1 0 2 .9 2 2v20c0 1.1-.9 2-2 2h-1c-.55 0-1 .45-1 1s.45 1 1 1h1c2.21 0 4-1.79 4-4v-20c0-2.21-1.79-4-4-4zm-2 3c0 .55-.45 1-1 1h-4c-.55 0-1-.45-1-1v-1h6z",fill:"currentColor"}),e.jsx("path",{d:"m18.41 22c-.78-.78-2.05-.78-2.83 0l-.59.59-3.59-3.59.59-.59c.78-.78.78-2.05 0-2.83l-2.59-2.59c-.78-.78-2.05-.78-2.83 0l-1.12 1.12c-.94.94-1.46 2.2-1.46 3.54v.69c0 1.34.52 2.59 1.46 3.54l6.66 6.66c.94.94 2.2 1.46 3.54 1.46h.69c1.34 0 2.59-.52 3.54-1.46l1.12-1.12c.78-.78.78-2.05 0-2.83zm.05 5.12c-.56.56-1.33.88-2.12.88h-.69c-.79 0-1.56-.32-2.12-.88l-6.66-6.66c-.56-.56-.88-1.33-.88-2.12v-.69c0-.79.32-1.56.88-2.12l1.12-1.12 2.59 2.59-1.29 1.29c-.39.39-.39 1.02 0 1.41l5 5c.39.39 1.02.39 1.41 0l1.29-1.29 2.59 2.59z",fill:"currentColor"})]}),e.jsx("input",{type:"tel",name:"phone",className:"identification-input identification-input-with-icon",placeholder:"DDD + n√∫mero",value:K(j.phone),onChange:ee,maxLength:15})]}),e.jsxs("div",{className:"identification-input-group",children:[e.jsxs("svg",{className:"identification-input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"m17 21.75h-10c-4.41 0-5.75-1.34-5.75-5.75v-8c0-4.41 1.34-5.75 5.75-5.75h10c4.41 0 5.75 1.34 5.75 5.75v8c0 4.41-1.34 5.75-5.75 5.75zm-10-18c-3.58 0-4.25.68-4.25 4.25v8c0 3.57.67 4.25 4.25 4.25h10c3.58 0 4.25-.68 4.25-4.25v-8c0-3.57-.67-4.25-4.25-4.25z",fill:"currentColor"}),e.jsx("path",{d:"m19 8.75h-5c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h5c.41 0 .75.34.75.75s-.34.75-.75.75z",fill:"currentColor"}),e.jsx("path",{d:"m19 12.75h-4c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h4c.41 0 .75.34.75.75s-.34.75-.75.75z",fill:"currentColor"}),e.jsx("path",{d:"m19 16.75h-2c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h2c.41 0 .75.34.75.75s-.34.75-.75.75z",fill:"currentColor"}),e.jsx("path",{d:"m8.50043 12.0399c-1.41 0-2.56-1.15-2.56-2.55998 0-1.41 1.15-2.56 2.56-2.56s2.55997 1.15 2.55997 2.56c0 1.40998-1.14997 2.55998-2.55997 2.55998zm0-3.61998c-.58 0-1.06.48-1.06 1.06 0 .57998.48 1.05998 1.06 1.05998s1.06-.48 1.06-1.05998c0-.58-.48-1.06-1.06-1.06z",fill:"currentColor"}),e.jsx("path",{d:"m11.9999 17.08c-.38 0-.71-.29-.75-.68-.11-1.08-.98-1.95-2.06999-2.05-.46-.04-.92-.04-1.38 0-1.09.1-1.96.96-2.07 2.05-.04.41-.41.72-.82.67-.41-.04-.71-.41-.67-.82.18-1.8 1.61-3.23 3.42-3.39.55-.05 1.11-.05 1.66 0 1.79999.17 3.23999 1.6 3.41999 3.39.04.41-.26.78-.67.82-.02.01-.05.01-.07.01z",fill:"currentColor"})]}),e.jsx("input",{type:"text",name:"cpf",className:"identification-input identification-input-with-icon",placeholder:"CPF",value:ne(j.cpf),onChange:ee,maxLength:14})]}),e.jsxs("div",{className:"identification-security-box",children:[H.length>0&&e.jsxs("div",{className:"identification-preparing-text",children:[e.jsx("span",{children:"P"}),e.jsx("span",{children:"r"}),e.jsx("span",{children:"e"}),e.jsx("span",{children:"p"}),e.jsx("span",{children:"a"}),e.jsx("span",{children:"r"}),e.jsx("span",{children:"a"}),e.jsx("span",{children:"n"}),e.jsx("span",{children:"d"}),e.jsx("span",{children:"o"}),e.jsx("span",{children:"."}),e.jsx("span",{children:"."}),e.jsx("span",{children:"."})]}),e.jsx("img",{src:Js,alt:"Mesa de madeira",className:"identification-security-image"}),H.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"identification-product-overlay identification-product-center",children:e.jsx("img",{src:re[H[0].image]||re.product1,alt:H[0].title,className:"identification-product-image"})}),H.length>1&&e.jsx("div",{className:"identification-product-overlay identification-product-right",children:e.jsx("img",{src:re[H[1].image]||re.product1,alt:H[1].title,className:"identification-product-image"})}),H.length>2&&e.jsx("div",{className:"identification-product-overlay identification-product-left",children:e.jsx("img",{src:re[H[2].image]||re.product1,alt:H[2].title,className:"identification-product-image"})})]})]}),e.jsxs("div",{className:"identification-input-group",children:[e.jsx("input",{ref:r,type:"text",name:"cep",className:`identification-input ${_?"identification-input-error":""}`,placeholder:"CEP",value:U(j.cep),onChange:ee,maxLength:9}),S&&j.cep.length===8&&e.jsx("div",{className:"identification-cep-loading",children:"Buscando CEP..."}),_&&j.cep.length===8&&!S&&e.jsx("div",{className:"identification-cep-error",children:"CEP n√£o encontrado"})]}),(!P||te)&&e.jsx("a",{href:"https://buscacepinter.correios.com.br/app/endereco/index.php?t",target:"_blank",rel:"noopener noreferrer",className:`identification-cep-link ${te?"":"fade-out"}`,children:"N√£o sei meu CEP"}),P&&!_&&!S&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"identification-shipping-section",children:e.jsxs("div",{className:"identification-shipping-options",children:[e.jsxs("label",{className:`identification-shipping-option ${b==="free"?"selected":""}`,children:[e.jsx("input",{type:"radio",name:"shipping",value:"free",checked:b==="free",onChange:m=>$(m.target.value)}),e.jsxs("div",{className:"identification-shipping-option-content",children:[e.jsx("div",{className:"identification-shipping-price",children:"Gr√°tis"}),e.jsx("div",{className:"identification-shipping-name",children:"Envio por conta da casa!"}),e.jsx("div",{className:"identification-shipping-time",children:"de 5 √† 6 dias √∫teis"})]})]}),e.jsxs("label",{className:`identification-shipping-option ${b==="express"?"selected":""}`,children:[e.jsx("input",{type:"radio",name:"shipping",value:"express",checked:b==="express",onChange:m=>$(m.target.value)}),e.jsxs("div",{className:"identification-shipping-option-content",children:[e.jsx("div",{className:"identification-shipping-price",children:"R$12,90"}),e.jsx("div",{className:"identification-shipping-name",children:"Valor do motoboy"}),e.jsx("div",{className:"identification-shipping-time",children:"de 2 √† 3 dias √∫teis"})]})]})]})}),e.jsxs("div",{className:"identification-address-section",children:[e.jsxs("div",{className:"identification-address-field",children:[e.jsx("svg",{className:"identification-address-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z",fill:"currentColor"})}),e.jsx("span",{className:"identification-address-text",children:j.street||"Rua n√£o informada"})]}),e.jsxs("div",{className:"identification-address-row",children:[e.jsxs("div",{className:"identification-input-group identification-input-group-number",children:[e.jsx("input",{type:"text",name:"number",className:"identification-input",placeholder:"N√∫mero",value:j.number,onChange:ee,disabled:j.hasNoNumber}),e.jsxs("label",{className:"identification-checkbox-label",children:[e.jsx("input",{type:"checkbox",name:"hasNoNumber",checked:j.hasNoNumber,onChange:m=>{i(f=>J(X({},f),{hasNoNumber:m.target.checked,number:m.target.checked?"":f.number}))}}),e.jsx("span",{children:"S/N"})]}),y&&!j.hasNoNumber&&j.number.trim()===""&&e.jsx("div",{className:"identification-field-error",children:"Informe o n√∫mero"})]}),e.jsx("div",{className:"identification-input-group identification-input-group-neighborhood",children:e.jsx("input",{type:"text",name:"neighborhood",className:"identification-input",placeholder:"Bairro",value:j.neighborhood,onChange:ee,readOnly:!0})})]}),e.jsx("div",{className:"identification-input-group",children:e.jsx("input",{type:"text",name:"complement",className:"identification-input",placeholder:"Complemento",value:j.complement,onChange:ee})}),e.jsxs("div",{className:"identification-address-row",children:[e.jsx("div",{className:"identification-input-group",children:e.jsx("input",{type:"text",name:"city",className:"identification-input",placeholder:"Cidade",value:j.city,onChange:ee,readOnly:!0})}),e.jsx("div",{className:"identification-input-group identification-input-group-state",children:e.jsx("input",{type:"text",name:"state",className:"identification-input",placeholder:"Estado",value:j.state,onChange:ee,maxLength:2,readOnly:!0})})]})]})]})]})]})}),e.jsx("div",{className:`payment-section ${z?"slide-in-right":""}`,children:e.jsxs("div",{className:"payment-section-content",children:[e.jsx("div",{className:"payment-section-header",children:e.jsx("h2",{className:"payment-section-title",children:"Forma de pagamento"})}),e.jsxs("div",{className:"payment-options",children:[e.jsx("button",{className:"payment-option payment-option-pix",children:e.jsx("div",{className:"payment-option-content",children:e.jsx("span",{className:"payment-option-label",children:"PIX"})})}),e.jsx("button",{className:"payment-option payment-option-credit",children:e.jsx("div",{className:"payment-option-content",children:e.jsx("span",{className:"payment-option-label",children:"CR√âDITO"})})}),e.jsx("button",{className:"payment-option payment-option-debit",children:e.jsx("div",{className:"payment-option-content",children:e.jsx("span",{className:"payment-option-label",children:"D√âBITO"})})})]})]})}),e.jsx("div",{className:`identification-actions ${z?"slide-out-left":""}`,children:e.jsx("button",{className:`identification-btn-continue ${W?"":"identification-btn-continue-disabled"}`,onClick:N,disabled:!W,children:"Continuar"})})]})})]})}function et(){var L;const s=me(),o=we(),{productId:a}=ze(),{addToCart:u,hasItems:c,getItemQuantity:p}=fe(),l=((L=o.state)==null?void 0:L.fromCheckout)||!1,[g,v]=t.useState(null),[h,w]=t.useState(!0),[x,d]=t.useState(!1),[r,C]=t.useState(!1),I=t.useRef(null);t.useLayoutEffect(()=>{document.documentElement.scrollTop=0,document.body.scrollTop=0,window.scrollTo(0,0)},[]),t.useEffect(()=>{a&&G(null,null,function*(){try{w(!0);const S=(yield Ne()).find(R=>R.id===a);v(S||null)}catch(k){console.error("Erro ao carregar produto:",k)}finally{w(!1)}})},[a]),t.useEffect(()=>{if(!I.current)return;const P=new IntersectionObserver(k=>{const S=k[0];C(!S.isIntersecting)},{threshold:.1,rootMargin:"0px"});return P.observe(I.current),()=>{I.current&&P.unobserve(I.current)}},[g]);const T=()=>{sessionStorage.setItem("navigationActive","true"),s(-1)},D=()=>{g&&(l?(u(g.id),s(-1)):c()?(u(g.id),sessionStorage.setItem("navigationActive","true"),s("/")):d(!0))},j=()=>{g&&(d(!1),sessionStorage.setItem("comingFromContinuePurchase","true"),sessionStorage.setItem("navigationActive","true"),s(`/checkout/${g.id}`))},i=()=>{g&&(u(g.id),d(!1),sessionStorage.setItem("navigationActive","true"),s("/"))},b=()=>{d(!1)};if(h)return e.jsx("div",{className:"product-details-container",children:e.jsx("div",{className:"product-details-loading",children:"Carregando..."})});if(!g)return e.jsxs("div",{className:"product-details-container",children:[e.jsx("div",{className:"product-details-header",children:e.jsxs("button",{className:"product-details-back-btn",onClick:T,"aria-label":"Voltar",children:[e.jsx("img",{src:Te,alt:"Voltar",className:"product-details-back-icon"}),e.jsx("span",{className:"product-details-back-text",children:"voltar"})]})}),e.jsx("div",{className:"product-details-error",children:"Produto n√£o encontrado"})]});const $=re[g.image]||re.product1,Y=(a?p(a):0)>0,Q=(g==null?void 0:g.forceBuyButton)||!1,n=c()||l,y=Q?"COMPRAR":n&&!Y?"ADICIONAR":"COMPRAR";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"product-details-container",children:[e.jsx("div",{className:"product-details-header",children:e.jsxs("button",{className:"product-details-back-btn",onClick:T,"aria-label":"Voltar",children:[e.jsx("img",{src:Te,alt:"Voltar",className:"product-details-back-icon"}),e.jsx("span",{className:"product-details-back-text",children:"voltar"})]})}),e.jsx("div",{className:"product-details-image-wrapper",children:e.jsx("img",{src:$,alt:g.title,className:"product-details-image"})}),e.jsxs("div",{className:"product-details-content",children:[e.jsx("h1",{className:"product-details-title",children:g.title}),g.description1&&e.jsx("p",{className:"product-details-description",children:g.description1}),g.description2&&e.jsx("p",{className:"product-details-description",children:g.description2}),g.fullDescription&&e.jsx("div",{className:"product-details-full-description",children:g.fullDescription.split(`
`).map((P,k)=>P?e.jsx("p",{className:"product-details-description",children:P},k):e.jsx("br",{},k))}),e.jsxs("div",{className:"product-details-price-container",children:[g.hasDiscount&&g.oldPrice&&g.oldPrice.trim()!==""&&g.oldPrice!==g.newPrice&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"product-details-price-old",children:de(g.oldPrice)}),e.jsx("span",{className:"product-details-price-separator",children:"|"})]}),e.jsx("span",{className:"product-details-price-new",children:de(g.newPrice)})]}),e.jsx("button",{ref:I,className:"product-details-buy-btn",onClick:D,children:y})]})]}),r&&e.jsx("button",{className:"product-details-buy-btn-fixed",onClick:D,children:y}),e.jsx(Ge,{isOpen:x,onContinue:j,onAdd:i,onClose:b})]})}const Ye=t.createContext(void 0);function st({children:s}){const[o,a]=t.useState(null),[u,c]=t.useState(!0);t.useEffect(()=>{let v=!0,h=!1;const w=setTimeout(()=>{v&&!h&&(console.warn("AuthContext: Timeout de seguran√ßa ativado, finalizando loading"),a(null),c(!1),h=!0)},3e3);G(null,null,function*(){try{const{data:{session:r},error:C}=yield M.auth.getSession();if(!v){clearTimeout(w);return}if(C){console.error("Erro ao buscar sess√£o:",C),a(null),c(!1),h=!0,clearTimeout(w);return}if(!(r!=null&&r.user)){a(null),c(!1),h=!0,clearTimeout(w);return}(yield p(r.user))||a(null),v&&(h=!0,c(!1),clearTimeout(w))}catch(r){console.error("Erro ao verificar sess√£o:",r),v&&(a(null),c(!1),h=!0,clearTimeout(w))}});const{data:{subscription:d}}=M.auth.onAuthStateChange((r,C)=>G(null,null,function*(){if(!(!h||!v))try{C!=null&&C.user&&(yield p(C.user))||a(null)}catch(I){console.error("Erro ao processar mudan√ßa de autentica√ß√£o:",I),a(null)}}));return()=>{v=!1,clearTimeout(w),d.unsubscribe()}},[]);const p=v=>G(null,null,function*(){try{const h=M.from("admin_users").select("*").eq("id",v.id).single(),w=new Promise((r,C)=>setTimeout(()=>C(new Error("Timeout ao buscar dados do usu√°rio")),2e3)),{data:x,error:d}=yield Promise.race([h,w]);if(d||!x){console.error("Usu√°rio admin n√£o encontrado:",d);try{yield M.auth.signOut()}catch(r){console.error("Erro ao fazer signOut:",r)}return a(null),!1}return a({id:x.id,email:x.email,storeId:x.store_id,role:x.role}),!0}catch(h){console.error("Erro ao carregar dados do usu√°rio:",h);try{yield M.auth.signOut()}catch(w){console.error("Erro ao fazer signOut:",w)}return a(null),!1}}),l=(v,h)=>G(null,null,function*(){try{console.log("üîê Iniciando login...");const{data:w,error:x}=yield M.auth.signInWithPassword({email:v,password:h});if(x)throw console.error("‚ùå Erro no signIn:",x),x;if(!(w!=null&&w.user))throw console.error("‚ùå Nenhum usu√°rio retornado"),new Error("Erro ao fazer login. Tente novamente.");console.log("‚úÖ SignIn bem-sucedido, buscando dados do admin...");const{data:d,error:r}=yield M.from("admin_users").select("*").eq("id",w.user.id).single();if(r||!d){console.error("‚ùå Erro ao buscar admin:",r);try{yield M.auth.signOut()}catch(C){console.error("Erro ao fazer signOut:",C)}throw new Error("Usu√°rio n√£o encontrado como administrador")}console.log("‚úÖ Dados do admin carregados:",d.email),a({id:d.id,email:d.email,storeId:d.store_id,role:d.role}),console.log("‚úÖ Login completo!")}catch(w){throw console.error("‚ùå Erro no login:",w),a(null),w}}),g=()=>G(null,null,function*(){try{yield M.auth.signOut(),a(null)}catch(v){console.error("Erro ao fazer logout:",v)}});return e.jsx(Ye.Provider,{value:{user:o,loading:u,login:l,logout:g},children:s})}const be=()=>{const s=t.useContext(Ye);if(!s)throw new Error("useAuth must be used within AuthProvider");return s},Xe="data:image/svg+xml,%3csvg%20id='Icons'%20enable-background='new%200%200%20128%20128'%20height='512'%20viewBox='0%200%20128%20128'%20width='512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20id='Show'%20d='m64%20104c-41.873%200-62.633-36.504-63.496-38.057-.672-1.209-.672-2.678%200-3.887.863-1.552%2021.623-38.056%2063.496-38.056s62.633%2036.504%2063.496%2038.057c.672%201.209.672%202.678%200%203.887-.863%201.552-21.623%2038.056-63.496%2038.056zm-55.293-40.006c4.758%207.211%2023.439%2032.006%2055.293%2032.006%2031.955%200%2050.553-24.775%2055.293-31.994-4.758-7.211-23.439-32.006-55.293-32.006-31.955%200-50.553%2024.775-55.293%2031.994zm55.293%2024.006c-13.234%200-24-10.766-24-24s10.766-24%2024-24%2024%2010.766%2024%2024-10.766%2024-24%2024zm0-40c-8.822%200-16%207.178-16%2016s7.178%2016%2016%2016%2016-7.178%2016-16-7.178-16-16-16z'/%3e%3c/svg%3e",Je="data:image/svg+xml,%3csvg%20id='Icons'%20enable-background='new%200%200%20128%20128'%20height='512'%20viewBox='0%200%20128%20128'%20width='512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20id='Hide'%20d='m79.891%2065.078%207.27-7.27c.529%201.979.839%204.048.839%206.192%200%2013.234-10.766%2024-24%2024-2.144%200-4.213-.31-6.192-.839l7.27-7.27c7.949-.542%2014.271-6.864%2014.813-14.813zm47.605-3.021c-.492-.885-7.47-13.112-21.11-23.474l-5.821%205.821c9.946%207.313%2016.248%2015.842%2018.729%2019.602-4.741%207.219-23.339%2031.994-55.294%2031.994-4.792%200-9.248-.613-13.441-1.591l-6.573%206.573c6.043%201.853%2012.685%203.018%2020.014%203.018%2041.873%200%2062.633-36.504%2063.496-38.057.672-1.209.672-2.677%200-3.886zm-16.668-39.229-88%2088c-.781.781-1.805%201.172-2.828%201.172s-2.047-.391-2.828-1.172c-1.563-1.563-1.563-4.094%200-5.656l11.196-11.196c-18.1-10.927-27.297-27.012-27.864-28.033-.672-1.209-.672-2.678%200-3.887.863-1.552%2021.623-38.056%2063.496-38.056%2010.827%200%2020.205%202.47%2028.222%206.122l12.95-12.95c1.563-1.563%204.094-1.563%205.656%200s1.563%204.094%200%205.656zm-76.495%2065.183%2010.127-10.127c-2.797-3.924-4.46-8.709-4.46-13.884%200-13.234%2010.766-24%2024-24%205.175%200%209.96%201.663%2013.884%204.459l8.189-8.189c-6.47-2.591-13.822-4.27-22.073-4.27-31.955%200-50.553%2024.775-55.293%2031.994%203.01%204.562%2011.662%2016.11%2025.626%2024.017zm15.934-15.935%2021.809-21.809c-2.379-1.405-5.118-2.267-8.076-2.267-8.822%200-16%207.178-16%2016%200%202.958.862%205.697%202.267%208.076z'/%3e%3c/svg%3e";function tt(){var P,k;const[s,o]=t.useState(""),[a,u]=t.useState(""),[c,p]=t.useState(""),[l,g]=t.useState(""),[v,h]=t.useState(!1),[w,x]=t.useState(!1),[d,r]=t.useState(!1),[C,I]=t.useState(!1),T=t.useRef(null),D=t.useRef(null),{login:j}=be(),{store:i}=he(),b=me(),$=we();t.useEffect(()=>{const S=$.state;S!=null&&S.message&&(g(S.message),S.email&&o(S.email))},[$]);const z=["gmail.com","live.com","hotmail.com","outlook.com","yahoo.com","uol.com.br","bol.com.br","ig.com.br","terra.com.br"],Y=((k=(P=$.state)==null?void 0:P.from)==null?void 0:k.pathname)||"/admin/dashboard",Q=S=>{const{name:R,value:_}=S.target;if(R==="email")if(o(_),_.length>0&&!_.includes("@"))r(!0);else if(_.includes("@")){const[O,te]=_.split("@");O&&te&&te.length>0?r(!0):r(!!(O&&!te))}else _.length===0&&r(!1);else R==="password"&&u(_)},n=t.useMemo(()=>{if(!s||s.length===0)return[];const S=s.toLowerCase();if(!S.includes("@"))return z.map(O=>`${S}@${O}`);const[R,_]=S.split("@");return!R||R.length===0?[]:_&&_.length>0?z.filter(O=>O.startsWith(_)).map(O=>`${R}@${O}`):z.map(O=>`${R}@${O}`)},[s]);t.useEffect(()=>{if(s&&n.length>0&&d){const S=s.toLowerCase();n.some(_=>_.toLowerCase()===S)&&(I(!0),setTimeout(()=>{r(!1),I(!1)},300))}},[s,n,d]);const y=S=>{var R;o(S),I(!0),setTimeout(()=>{r(!1),I(!1)},300),(R=T.current)==null||R.focus()};t.useEffect(()=>{const S=R=>{D.current&&!D.current.contains(R.target)&&T.current&&!T.current.contains(R.target)&&r(!1)};return d&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[d]);const L=S=>G(null,null,function*(){S.preventDefault(),p(""),h(!0);const R=setTimeout(()=>{console.warn("‚ö†Ô∏è Timeout de seguran√ßa ativado ap√≥s 15 segundos"),h(!1),p("A conex√£o est√° demorando muito. Verifique sua internet e tente novamente.")},15e3);try{console.log("üìù Tentando fazer login..."),yield j(s,a),clearTimeout(R),console.log("‚úÖ Login bem-sucedido, redirecionando...");const _=Y==="/admin/dashboard"?Y:"/admin/dashboard";try{b(_,{replace:!0}),setTimeout(()=>{window.location.pathname==="/admin/login"&&(console.log("‚ö†Ô∏è Navigate n√£o funcionou, usando window.location"),window.location.href=_)},1e3)}catch(O){console.error("Erro ao navegar:",O),window.location.href=_}}catch(_){clearTimeout(R),console.error("‚ùå Erro no handleSubmit:",_),p(_.message||"Erro ao fazer login. Verifique suas credenciais."),h(!1)}});return e.jsx("div",{className:"admin-login-page",children:e.jsxs("div",{className:"login-container",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("h1",{children:"Painel Administrativo"}),i&&e.jsx("p",{className:"store-name",children:i.name})]}),e.jsxs("form",{onSubmit:L,className:"login-form",children:[e.jsxs("div",{className:"form-group",ref:D,children:[e.jsx("input",{ref:T,type:"email",id:"email",name:"email",value:s,onChange:Q,onFocus:()=>{s.length>0&&n.length>0&&r(!0)},placeholder:"Gmail",required:!0,autoComplete:"email"}),d&&n.length>0&&e.jsx("div",{className:`login-email-dropdown ${C?"closing":""}`,children:n.map((S,R)=>e.jsx("button",{type:"button",className:"login-email-suggestion",onClick:()=>y(S),children:S},R))})]}),e.jsxs("div",{className:"form-group form-group-password",children:[e.jsx("input",{type:w?"text":"password",id:"password",name:"password",value:a,onChange:Q,placeholder:"Senha",required:!0,autoComplete:"current-password",className:"login-input-password"}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>x(!w),tabIndex:-1,children:e.jsx("img",{src:w?Je:Xe,alt:w?"Esconder senha":"Mostrar senha",className:"password-toggle-icon"})})]}),l&&e.jsx("div",{className:"success-message",children:l}),c&&e.jsx("div",{className:"error-message",children:c}),e.jsx("button",{type:"submit",className:"login-button",disabled:v,children:v?"Entrando...":"Entrar"})]}),e.jsx("div",{className:"login-footer",children:e.jsxs("p",{children:["N√£o tem uma conta?"," ",e.jsx("a",{href:"/admin/register",children:"Cadastre-se"})]})})]})})}function ot(){const[s,o]=t.useState(""),[a,u]=t.useState(""),[c,p]=t.useState(""),[l,g]=t.useState(""),[v,h]=t.useState(""),[w,x]=t.useState(!1),[d,r]=t.useState(""),[C,I]=t.useState(!1),[T,D]=t.useState(!1),[j,i]=t.useState(!1),b=t.useRef(null),$=t.useRef(null),z=me(),Y=["gmail.com","live.com","hotmail.com","outlook.com","yahoo.com","uol.com.br","bol.com.br","ig.com.br","terra.com.br"],Q=k=>{const{name:S,value:R}=k.target;if(S==="storeName")o(R);else if(S==="ownerName")u(R);else if(S==="email")if(p(R),R.length>0&&!R.includes("@"))D(!0);else if(R.includes("@")){const[_,O]=R.split("@");_&&O&&O.length>0?D(!0):D(!!(_&&!O))}else R.length===0&&D(!1);else S==="password"?g(R):S==="confirmPassword"&&h(R)},n=t.useMemo(()=>{if(!c||c.length===0)return[];const k=c.toLowerCase();if(!k.includes("@"))return Y.map(_=>`${k}@${_}`);const[S,R]=k.split("@");return!S||S.length===0?[]:R&&R.length>0?Y.filter(_=>_.startsWith(R)).map(_=>`${S}@${_}`):Y.map(_=>`${S}@${_}`)},[c]);t.useEffect(()=>{if(c&&n.length>0&&T){const k=c.toLowerCase();n.some(R=>R.toLowerCase()===k)&&(i(!0),setTimeout(()=>{D(!1),i(!1)},300))}},[c,n,T]);const y=k=>{var S;p(k),i(!0),setTimeout(()=>{D(!1),i(!1)},300),(S=b.current)==null||S.focus()};t.useEffect(()=>{const k=S=>{$.current&&!$.current.contains(S.target)&&b.current&&!b.current.contains(S.target)&&D(!1)};return T&&document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[T]);const L=k=>k.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),P=k=>G(null,null,function*(){var S,R;if(k.preventDefault(),r(""),I(!0),l!==v){r("As senhas n√£o coincidem."),I(!1);return}if(l.length<6){r("A senha deve ter pelo menos 6 caracteres."),I(!1);return}try{const{data:_}=yield M.from("admin_users").select("email").eq("email",c).single();if(_)throw new Error("Este email j√° est√° cadastrado. Se voc√™ excluiu o usu√°rio, pode levar alguns minutos para o sistema atualizar. Tente novamente em instantes ou use outro email.");const{data:O,error:te}=yield M.auth.signUp({email:c,password:l});if(te)throw te.message.includes("already registered")||te.message.includes("User already registered")||te.message.includes("already exists")?new Error("Este email j√° est√° cadastrado. Por favor, fa√ßa login ou use outro email. Se voc√™ excluiu o usu√°rio, aguarde alguns minutos e tente novamente."):te;if(!O.user)throw new Error("Erro ao criar usu√°rio.");console.log("Usu√°rio criado:",(S=O.user)==null?void 0:S.id),console.log("Sess√£o inicial:",O.session?"Existe":"N√£o existe");let F=O.session,B=O.user;if(!F){console.log("Sess√£o n√£o encontrada, tentando autenticar..."),yield new Promise(V=>setTimeout(V,500));const{data:A}=yield M.auth.getSession();if(A!=null&&A.session?(F=A.session,console.log("Sess√£o encontrada ap√≥s espera")):console.log("Sess√£o ainda n√£o encontrada, tentando signIn..."),!F){const{data:V,error:W}=yield M.auth.signInWithPassword({email:c,password:l});if(W){console.error("Erro no signIn:",W),yield new Promise(m=>setTimeout(m,1e3));const{data:N}=yield M.auth.getSession();if(N!=null&&N.session)F=N.session,console.log("Sess√£o encontrada ap√≥s retry");else throw new Error(`Erro ao autenticar: ${W.message}. Verifique se a confirma√ß√£o de email est√° DESABILITADA no Supabase Dashboard > Authentication > Settings.`)}else F=V.session,B=V.user,console.log("Sess√£o criada via signIn")}}if(!B&&O.user&&(B=O.user,console.log("Usando usu√°rio do signUp:",B.id)),!B){const{data:{user:A},error:V}=yield M.auth.getUser();if(V)if(console.error("Erro ao buscar usu√°rio:",V),(R=O.user)!=null&&R.id)B=O.user,console.log("Usando usu√°rio do signUp apesar do erro getUser:",B.id);else throw new Error("N√£o foi poss√≠vel identificar o usu√°rio. Tente novamente.");else A&&(B=A,console.log("Usu√°rio obtido via getUser:",B.id))}if(!B||!B.id)throw new Error("N√£o foi poss√≠vel obter o ID do usu√°rio. O usu√°rio foi criado, mas n√£o foi poss√≠vel autentic√°-lo. Tente fazer login manualmente.");if(console.log("‚úÖ Usu√°rio identificado:",B.id),console.log("‚úÖ Sess√£o:",F?"Ativa":"N√£o ativa"),!F){console.log("‚ö†Ô∏è Sess√£o n√£o encontrada, fazendo signIn for√ßado...");const{data:A,error:V}=yield M.auth.signInWithPassword({email:c,password:l});if(V)throw console.error("Erro no signIn for√ßado:",V),new Error(`N√£o foi poss√≠vel autenticar o usu√°rio: ${V.message}. O usu√°rio foi criado, mas √© necess√°rio fazer login manualmente.`);if(!A.session)throw new Error("Sess√£o n√£o foi criada ap√≥s signIn. Tente fazer login manualmente.");F=A.session,console.log("‚úÖ Sess√£o criada via signIn for√ßado")}if(!F)throw new Error("N√£o foi poss√≠vel estabelecer sess√£o. O usu√°rio foi criado, mas √© necess√°rio fazer login manualmente em /admin/login");if(!B||!B.id)throw new Error("N√£o foi poss√≠vel identificar o usu√°rio.");if(console.log("‚úÖ Usu√°rio autenticado:",B.id),console.log("‚úÖ Sess√£o ativa:",F?"Sim":"N√£o"),console.log("‚úÖ Token de acesso:",F!=null&&F.access_token?"Existe":"N√£o existe"),!F||!F.access_token)throw new Error("Sess√£o inv√°lida. N√£o foi poss√≠vel obter token de acesso. Tente fazer login manualmente.");F.user?(console.log("‚úÖ Sess√£o tem user:",F.user.id),B=F.user):console.log("‚ö†Ô∏è Sess√£o n√£o tem user, usando currentUser:",B.id),console.log("‚úÖ Criando loja para usu√°rio:",B.id),console.log("‚úÖ Token da sess√£o:",F.access_token?"Existe ("+F.access_token.substring(0,20)+"...)":"N√ÉO EXISTE");const{error:le}=yield M.from("stores").select("id").limit(0);le&&le.code==="PGRST301"?console.log("‚ö†Ô∏è Teste de autentica√ß√£o: RLS pode estar bloqueando"):console.log("‚úÖ Teste de autentica√ß√£o: OK");const K=L(s);if(console.log("üìù Dados da loja a criar:",{name:s,slug:K,owner_email:c,owner_name:a,subscription_status:"active"}),!F||!F.access_token)throw console.error("‚ùå Sess√£o perdida antes de inserir!"),new Error("Sess√£o n√£o encontrada. Por favor, fa√ßa login novamente.");console.log("‚úÖ Usando sess√£o existente para inserir loja"),console.log("  - User ID:",B.id),console.log("  - Token presente:",F.access_token?"Sim":"N√£o");let ne,U;console.log("üîÑ Tentando inserir usando fun√ß√£o SQL...");const{data:oe,error:ee}=yield M.rpc("insert_store",{p_name:s,p_slug:K,p_owner_email:c,p_owner_name:a});if(ee){console.log("‚ö†Ô∏è Fun√ß√£o SQL falhou, tentando inser√ß√£o direta..."),console.error("Erro da fun√ß√£o:",ee);const A=yield M.from("stores").insert({name:s,slug:K,owner_email:c,owner_name:a,subscription_status:"active"}).select().single();ne=A.data,U=A.error}else{console.log("‚úÖ Fun√ß√£o SQL executada com sucesso!");const{data:A,error:V}=yield M.from("stores").select("*").eq("id",oe).single();V?U=V:(ne=A,U=null)}if(U&&(console.error("üîç DETALHES DO ERRO DE INSER√á√ÉO:"),console.error("  - C√≥digo:",U.code),console.error("  - Mensagem:",U.message),console.error("  - Detalhes:",U.details),console.error("  - Hint:",U.hint),console.error("  - Status HTTP:",U.status),console.error("  - Sess√£o ativa:",F?"Sim":"N√£o"),console.error("  - Token presente:",F!=null&&F.access_token?"Sim":"N√£o")),U&&(U.code==="42501"||U.message.includes("row-level security"))){console.log("‚ö†Ô∏è Erro RLS detectado, tentando reautenticar...");const{data:A,error:V}=yield M.auth.signInWithPassword({email:c,password:l});if(V)console.error("‚ùå Erro ao reautenticar:",V);else if(A.session){console.log("‚úÖ Reautentica√ß√£o bem-sucedida, tentando inserir novamente...");const W=yield M.from("stores").insert({name:s,slug:K,owner_email:c,owner_name:a,subscription_status:"active"}).select().single();ne=W.data,U=W.error}}if(U)throw console.error("‚ùå Erro ao criar loja:",U),console.error("C√≥digo do erro:",U.code),console.error("Mensagem:",U.message),console.error("Detalhes:",U.details),console.error("Hint:",U.hint),console.error("Status HTTP:",U.status),U.message.includes("row-level security")||U.message.includes("RLS")||U.code==="42501"?(console.error("üîç DIAGN√ìSTICO RLS:"),console.error('1. Execute o script "SOLUCAO-RLS-DEFINITIVA-FINAL.sql" no Supabase SQL Editor'),console.error("2. Verifique se as 3 pol√≠ticas INSERT foram criadas (stores, admin_users, store_customizations)"),console.error("3. Verifique se RLS est√° habilitado nas 3 tabelas"),console.error("4. Limpe o cache do navegador (Ctrl+Shift+Del) e tente novamente"),yield M.auth.signOut(),new Error(`ERRO RLS: As pol√≠ticas est√£o bloqueando. C√≥digo: ${U.code}. Execute o script "SOLUCAO-RLS-DEFINITIVA-FINAL.sql" no Supabase SQL Editor. Este script remove TODAS as pol√≠ticas antigas e cria novas com nomes simples.`)):(yield M.auth.signOut(),new Error(`Erro ao criar loja: ${U.message}. C√≥digo: ${U.code||"N/A"}`));console.log("üîÑ Tentando inserir admin_user usando fun√ß√£o SQL...");const{error:se}=yield M.rpc("insert_admin_user",{p_user_id:O.user.id,p_store_id:ne.id,p_email:c,p_role:"owner"});let ae=null;if(se){console.log("‚ö†Ô∏è Fun√ß√£o SQL falhou, tentando inser√ß√£o direta..."),console.error("Erro da fun√ß√£o:",se);const{error:A}=yield M.from("admin_users").insert({id:O.user.id,store_id:ne.id,email:c,role:"owner"});ae=A}else console.log("‚úÖ Fun√ß√£o SQL para admin_user executada com sucesso!");if(ae)throw yield M.from("stores").delete().eq("id",ne.id),yield M.auth.signOut(),ae;console.log("üîÑ Tentando inserir customiza√ß√µes usando fun√ß√£o SQL...");const{error:H}=yield M.rpc("insert_store_customizations",{p_store_id:ne.id});H?(console.log("‚ö†Ô∏è Fun√ß√£o SQL falhou, tentando inser√ß√£o direta..."),console.error("Erro da fun√ß√£o:",H),yield M.from("store_customizations").insert({store_id:ne.id,promo_banner_visible:!0,promo_banner_text:"ESQUENTA BLACK FRIDAY - AT√â 60%OFF",promo_banner_bg_color:"#FDD8A7",promo_banner_text_color:"#000000",promo_banner_use_gradient:!0,primary_color:"#FF6B35",secondary_color:"#004E89",background_color:"#FFFFFF",text_color:"#000000",show_search:!0,show_menu:!0,show_cart:!0})):console.log("‚úÖ Fun√ß√£o SQL para customiza√ß√µes executada com sucesso!"),yield M.auth.signOut(),z(`/admin/login?store=${K}`,{state:{message:"Cadastro realizado com sucesso! Fa√ßa login para continuar.",email:c}})}catch(_){console.error("Erro no cadastro:",_),r(_.message||"Erro ao realizar cadastro. Tente novamente.")}finally{I(!1)}});return e.jsx("div",{className:"admin-register-page",children:e.jsxs("div",{className:"register-container",children:[e.jsxs("div",{className:"register-header",children:[e.jsx("h1",{children:"Criar Conta"}),e.jsx("p",{className:"register-subtitle",children:"Cadastre sua loja e comece a vender"})]}),e.jsxs("form",{onSubmit:P,className:"register-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("svg",{className:"register-input-icon",width:"20",height:"20",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"m44.2421875 16.5478516-2.5244141-7.2978516c-.6513672-1.8828125-2.4277344-3.1479492-4.4199219-3.1479492h-26.555664c-1.9921875 0-3.7685547 1.2651367-4.4199219 3.1479492l-2.5244141 7.2978516c-.5996094 1.7329102-.3925781 3.5.5668945 4.847168.9858398 1.3842773 2.6660156 2.1777344 4.6098633 2.1777344 1.90625 0 3.8183594-.7636719 5.2905273-2.0429688 1.1367188 1.2729492 2.84375 2.0429688 4.7397461 2.0429688 1.9174805 0 3.71875-.7607422 5.0151367-2.0415039 1.2963867 1.2807617 3.0981445 2.0415039 5.0151367 2.0415039 1.8964844 0 3.6035156-.7700195 4.7402344-2.0429688 1.2123413 1.053894 2.7244873 1.7496948 4.2851563 1.9650269v12.6575317c0 1.5078125-1.2275391 2.7353516-2.7363281 2.7353516h-5.2294922v-6.7148438c0-3.203125-2.6054688-5.8085938-5.809082-5.8085938h-.4399414c-3.203125 0-5.809082 2.6054688-5.809082 5.8085938v6.7148438h-5.3212891c-1.5083008 0-2.7358398-1.2275391-2.7358398-2.7353516v-8.9248047c0-.828125-.6713867-1.5-1.5-1.5s-1.5.671875-1.5 1.5v8.9248047c0 3.1621094 2.5732422 5.7353516 5.7358398 5.7353516h6.8212891 9.0581055 6.7294922c3.1630859 0 5.7363281-2.5732422 5.7363281-5.7353516v-12.8878785c1.078186-.3503418 1.987793-.9891968 2.6152344-1.8694458.9589843-1.3476562 1.1660156-3.1142578.5664062-4.8471679zm-23.2055664 22.3398437v-6.7148438c0-1.5488281 1.2602539-2.8085938 2.809082-2.8085938h.4399414c1.5493164 0 2.809082 1.2597656 2.809082 2.8085938v6.7148438zm20.1948242-19.2329101c-.421875.5917969-1.1904297.9179688-2.1660156.9179688-1.6357422 0-3.3535156-.9648438-4.2744141-2.4013672-.2783203-.434082-.7558594-.6904297-1.2626953-.6904297-.0683594 0-.1367188.0048828-.2060547.0141602-.5800781.0805664-1.0595703.4907227-1.2294922 1.0507813-.3730469 1.2314453-1.5732422 2.0268555-3.0576172 2.0268555-1.5585938 0-3.0283203-.8969727-3.6582031-2.2319336-.2480469-.5249023-.7763672-.8598633-1.3569336-.8598633s-1.1088867.3349609-1.3564453.8598633c-.6303711 1.3349609-2.1005859 2.2319336-3.6586914 2.2319336-1.4838867 0-2.684082-.7958984-3.0576172-2.0268555-.1699219-.5600586-.6499023-.9702148-1.2294922-1.0507813-.5810547-.0771484-1.1533203.184082-1.4692383.6767578-.9199219 1.4360352-2.6376953 2.4008789-4.2739258 2.4008789-.9750977 0-1.7446289-.3261719-2.1665039-.9179688-.3950195-.5551758-.4575195-1.3100586-.175293-2.1264648l2.5244141-7.2973633c.2338867-.675293.8706055-1.1289063 1.5849609-1.1289063h26.5556641c.7138672 0 1.3505859.4536133 1.5839844 1.128418l2.5244141 7.2983398c.2832031.815918.2207031 1.5708008-.1748047 2.1259766z",fill:"currentColor"})}),e.jsx("input",{type:"text",id:"storeName",name:"storeName",value:s,onChange:Q,placeholder:"Nome da loja",required:!0,autoComplete:"organization",className:"register-input-with-icon"})]}),e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"text",id:"ownerName",name:"ownerName",value:a,onChange:Q,placeholder:"Seu nome",required:!0,autoComplete:"name"})}),e.jsxs("div",{className:"form-group",ref:$,children:[e.jsxs("svg",{className:"register-input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"m19 20.5h-14a4.00427 4.00427 0 0 1 -4-4v-9a4.00427 4.00427 0 0 1 4-4h14a4.00427 4.00427 0 0 1 4 4v9a4.00427 4.00427 0 0 1 -4 4zm-14-15a2.00229 2.00229 0 0 0 -2 2v9a2.00229 2.00229 0 0 0 2 2h14a2.00229 2.00229 0 0 0 2-2v-9a2.00229 2.00229 0 0 0 -2-2z",fill:"currentColor"}),e.jsx("path",{d:"m12 13.43359a4.99283 4.99283 0 0 1 -3.07031-1.0542l-6.544-5.08984a1.00035 1.00035 0 0 1 1.22852-1.5791l6.54394 5.08984a2.99531 2.99531 0 0 0 3.6836 0l6.54394-5.08984a1.00035 1.00035 0 0 1 1.22852 1.5791l-6.544 5.08984a4.99587 4.99587 0 0 1 -3.07021 1.0542z",fill:"currentColor"})]}),e.jsx("input",{ref:b,type:"email",id:"email",name:"email",value:c,onChange:Q,onFocus:()=>{c.length>0&&n.length>0&&D(!0)},placeholder:"Gmail",required:!0,autoComplete:"email",className:"register-input-with-icon"}),T&&n.length>0&&e.jsx("div",{className:`register-email-dropdown ${j?"closing":""}`,children:n.map((k,S)=>e.jsx("button",{type:"button",className:"register-email-suggestion",onClick:()=>y(k),children:k},S))})]}),e.jsxs("div",{className:"form-group form-group-password",children:[e.jsx("input",{type:w?"text":"password",id:"password",name:"password",value:l,onChange:Q,placeholder:"Senha",required:!0,autoComplete:"new-password",minLength:6,className:"register-input-password"}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>x(!w),tabIndex:-1,children:e.jsx("img",{src:w?Je:Xe,alt:w?"Esconder senha":"Mostrar senha",className:"password-toggle-icon"})})]}),e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:v,onChange:Q,placeholder:"Confirmar senha",required:!0,autoComplete:"new-password",minLength:6})}),d&&e.jsx("div",{className:"error-message",children:d}),e.jsx("button",{type:"submit",className:"register-button",disabled:C,children:C?"Cadastrando...":"Cadastrar"})]}),e.jsx("div",{className:"register-footer",children:e.jsxs("p",{children:["J√° tem uma conta?"," ",e.jsx("a",{href:"/admin/login",children:"Fazer login"})]})})]})})}function pe({children:s}){const{user:o,logout:a}=be(),{store:u}=he(),c=me(),p=we(),[l,g]=t.useState(!1),v=()=>G(null,null,function*(){yield a(),c("/admin/login")}),h=d=>p.pathname===d?"active":"",w=()=>{g(!l)},x=()=>{g(!1)};return e.jsxs("div",{className:"admin-layout",children:[e.jsx("button",{className:`mobile-menu-toggle ${l?"open":""}`,onClick:w,"aria-label":"Toggle menu",children:e.jsx("span",{className:"menu-icon",children:l?"√ó":"‚ò∞"})}),l&&e.jsx("div",{className:"sidebar-overlay",onClick:x}),e.jsxs("aside",{className:`admin-sidebar ${l?"open":""}`,children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h2",{children:"Painel Admin"}),u&&e.jsx("p",{className:"store-name",children:u.name}),e.jsx("button",{className:"sidebar-close",onClick:x,"aria-label":"Close menu",children:"√ó"})]}),e.jsxs("nav",{className:"sidebar-nav",children:[e.jsxs(ue,{to:"/admin/dashboard",className:h("/admin/dashboard"),onClick:x,children:[e.jsx("span",{className:"nav-icon",children:"üìä"}),"Dashboard"]}),e.jsxs(ue,{to:"/admin/produtos",className:h("/admin/produtos"),onClick:x,children:[e.jsx("span",{className:"nav-icon",children:"üõçÔ∏è"}),"Produtos"]}),e.jsxs(ue,{to:"/admin/secoes",className:h("/admin/secoes"),onClick:x,children:[e.jsx("span",{className:"nav-icon",children:"üìë"}),"Se√ß√µes"]}),e.jsxs(ue,{to:"/admin/personalizacao",className:h("/admin/personalizacao"),onClick:x,children:[e.jsx("span",{className:"nav-icon",children:"üé®"}),"Personaliza√ß√£o"]}),e.jsxs(ue,{to:"/admin/configuracoes",className:h("/admin/configuracoes"),onClick:x,children:[e.jsx("span",{className:"nav-icon",children:"‚öôÔ∏è"}),"Configura√ß√µes"]})]}),e.jsxs("div",{className:"sidebar-footer",children:[e.jsxs("div",{className:"user-info",children:[e.jsx("span",{className:"user-icon",children:"üë§"}),e.jsx("span",{className:"user-email",children:o==null?void 0:o.email})]}),e.jsx("button",{onClick:v,className:"logout-button",children:"Sair"}),e.jsx(ue,{to:"/",className:"view-store-link",children:"Ver Loja ‚Üí"})]})]}),e.jsx("main",{className:"admin-main",children:e.jsx("div",{className:"admin-content",children:s})})]})}function nt(){const{store:s}=he();return e.jsx(pe,{children:e.jsxs("div",{className:"dashboard-page",children:[e.jsx("h1",{children:"Dashboard"}),e.jsx("p",{className:"subtitle",children:"Bem-vindo ao painel de administra√ß√£o da sua loja"}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"üé®"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Personaliza√ß√£o"}),e.jsx("p",{className:"stat-value",children:s!=null&&s.customizations?"Ativa":"Padr√£o"}),e.jsx("p",{className:"stat-detail",children:"Cores e logo"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"‚úÖ"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Status da Loja"}),e.jsx("p",{className:"stat-value",children:"Ativa"}),e.jsx("p",{className:"stat-detail",children:"Assinatura vigente"})]})]})]}),e.jsxs("div",{className:"quick-actions",children:[e.jsx("h2",{children:"A√ß√µes R√°pidas"}),e.jsxs("div",{className:"actions-grid",children:[e.jsxs(ue,{to:"/admin/produtos",className:"action-card",children:[e.jsx("span",{className:"action-icon",children:"‚ûï"}),e.jsx("h3",{children:"Adicionar Produto"}),e.jsx("p",{children:"Cadastre um novo produto"})]}),e.jsxs(ue,{to:"/admin/secoes",className:"action-card",children:[e.jsx("span",{className:"action-icon",children:"üìù"}),e.jsx("h3",{children:"Gerenciar Se√ß√µes"}),e.jsx("p",{children:"Organize suas categorias"})]}),e.jsxs(ue,{to:"/admin/personalizacao",className:"action-card",children:[e.jsx("span",{className:"action-icon",children:"üé®"}),e.jsx("h3",{children:"Personalizar Loja"}),e.jsx("p",{children:"Cores, logo e banner"})]}),e.jsxs(ue,{to:"/",className:"action-card",children:[e.jsx("span",{className:"action-icon",children:"üëÅÔ∏è"}),e.jsx("h3",{children:"Visualizar Loja"}),e.jsx("p",{children:"Ver como os clientes veem"})]})]})]})]})})}function at(){const{store:s}=he(),[o,a]=t.useState([]),[u,c]=t.useState([]),[p,l]=t.useState([]),[g,v]=t.useState(!0),[h,w]=t.useState(!1),[x,d]=t.useState(null),[r,C]=t.useState({image:"",title:"",description1:"",description2:"",oldPrice:"",newPrice:"",fullDescription:"",setId:"",subsetId:"",displayOrder:0,isActive:!0}),[I,T]=t.useState("");t.useEffect(()=>{s!=null&&s.id&&(D(),j())},[s==null?void 0:s.id]),t.useEffect(()=>{r.setId?i(r.setId):l([])},[r.setId]);const D=()=>G(null,null,function*(){if(s!=null&&s.id){v(!0);try{const{data:n,error:y}=yield M.from("products").select("*").eq("store_id",s.id).order("display_order",{ascending:!0});if(y)throw y;a(n||[])}catch(n){console.error("Erro ao carregar produtos:",n),T(`‚ùå Erro ao carregar produtos: ${n.message}`)}finally{v(!1)}}}),j=()=>G(null,null,function*(){if(s!=null&&s.id)try{const{data:n,error:y}=yield M.from("sets").select("id, name").eq("store_id",s.id).eq("is_active",!0).order("display_order",{ascending:!0});if(y)throw y;c(n||[])}catch(n){console.error("Erro ao carregar se√ß√µes:",n)}}),i=n=>G(null,null,function*(){if(s!=null&&s.id)try{const{data:y,error:L}=yield M.from("subsets").select("id, name, set_id").eq("store_id",s.id).eq("set_id",n).eq("is_active",!0).order("display_order",{ascending:!0});if(L)throw L;l(y||[])}catch(y){console.error("Erro ao carregar subse√ß√µes:",y)}}),b=()=>{d(null),C({image:"",title:"",description1:"",description2:"",oldPrice:"",newPrice:"",fullDescription:"",setId:"",subsetId:"",displayOrder:0,isActive:!0}),w(!0),T("")},$=n=>{var y;d(n),C({image:n.image||"",title:n.title||"",description1:n.description1||"",description2:n.description2||"",oldPrice:n.old_price||"",newPrice:n.new_price||"",fullDescription:n.full_description||"",setId:n.set_id||"",subsetId:n.subset_id||"",displayOrder:n.display_order||0,isActive:(y=n.is_active)!=null?y:!0}),w(!0),T("")},z=n=>G(null,null,function*(){if(confirm("Tem certeza que deseja excluir este produto?"))try{if(!(yield Ws(n)))throw new Error("Erro ao excluir produto");T("‚úÖ Produto exclu√≠do com sucesso!"),ye(),D()}catch(y){console.error("Erro ao excluir produto:",y),T(`‚ùå Erro ao excluir produto: ${y.message}`)}}),Y=n=>G(null,null,function*(){if(n.preventDefault(),!!(s!=null&&s.id)){T("");try{if(x){if(!(yield Qs({id:x.id,image:r.image,title:r.title,description1:r.description1,description2:r.description2,oldPrice:r.oldPrice,newPrice:r.newPrice,fullDescription:r.fullDescription,setId:r.setId||void 0,subsetId:r.subsetId||void 0,displayOrder:r.displayOrder,isActive:r.isActive})))throw new Error("Erro ao atualizar produto");T("‚úÖ Produto atualizado com sucesso!")}else{if(!(yield Gs({image:r.image,title:r.title,description1:r.description1,description2:r.description2,oldPrice:r.oldPrice,newPrice:r.newPrice,fullDescription:r.fullDescription,setId:r.setId||void 0,subsetId:r.subsetId||void 0,displayOrder:r.displayOrder,isActive:r.isActive,storeId:s.id})))throw new Error("Erro ao criar produto");T("‚úÖ Produto criado com sucesso!")}ye(),w(!1),d(null),yield D()}catch(y){console.error("Erro ao salvar produto:",y),T(`‚ùå Erro ao salvar produto: ${y.message}`)}}}),Q=()=>{w(!1),d(null),C({image:"",title:"",description1:"",description2:"",oldPrice:"",newPrice:"",fullDescription:"",setId:"",subsetId:"",displayOrder:0,isActive:!0}),T("")};return g?e.jsx(pe,{children:e.jsx("div",{className:"loading",children:"Carregando produtos..."})}):o.length===0&&!h?e.jsx(pe,{children:e.jsxs("div",{className:"products-admin-page",children:[I&&e.jsx("div",{className:`message ${I.includes("‚ùå")?"error":"success"}`,children:I}),e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"üõçÔ∏è"}),e.jsx("h3",{children:"Nenhum produto cadastrado"}),e.jsx("p",{children:"Comece adicionando seu primeiro produto √† loja"}),e.jsx("button",{className:"add-button",onClick:b,children:"‚ûï Adicionar Primeiro Produto"})]})]})}):e.jsx(pe,{children:e.jsxs("div",{className:"products-admin-page",children:[e.jsx("h1",{children:"Gerenciamento de Produtos"}),e.jsx("p",{className:"subtitle",children:"Adicione, edite e organize os produtos da sua loja"}),I&&e.jsx("div",{className:`message ${I.includes("‚ùå")?"error":"success"}`,children:I}),!h&&e.jsx("div",{className:"actions-bar",children:e.jsx("button",{className:"add-button",onClick:b,children:"‚ûï Adicionar Produto"})}),h&&e.jsxs("div",{className:"form-container",children:[e.jsx("h2",{children:x?"Editar Produto":"Adicionar Produto"}),e.jsxs("form",{onSubmit:Y,className:"product-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"URL da Imagem *"}),e.jsx("input",{type:"text",value:r.image,onChange:n=>C(J(X({},r),{image:n.target.value})),placeholder:"https://exemplo.com/imagem.jpg",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"T√≠tulo do Produto *"}),e.jsx("input",{type:"text",value:r.title,onChange:n=>C(J(X({},r),{title:n.target.value})),placeholder:"Nome do produto",required:!0})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Descri√ß√£o 1"}),e.jsx("input",{type:"text",value:r.description1,onChange:n=>C(J(X({},r),{description1:n.target.value})),placeholder:"Primeira linha de descri√ß√£o"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Descri√ß√£o 2"}),e.jsx("input",{type:"text",value:r.description2,onChange:n=>C(J(X({},r),{description2:n.target.value})),placeholder:"Segunda linha de descri√ß√£o"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Pre√ßo Anterior (para desconto)"}),e.jsx("input",{type:"text",value:r.oldPrice,onChange:n=>C(J(X({},r),{oldPrice:n.target.value})),placeholder:"R$ 0,00"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Pre√ßo Atual *"}),e.jsx("input",{type:"text",value:r.newPrice,onChange:n=>C(J(X({},r),{newPrice:n.target.value})),placeholder:"R$ 0,00",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Descri√ß√£o Completa"}),e.jsx("textarea",{value:r.fullDescription,onChange:n=>C(J(X({},r),{fullDescription:n.target.value})),placeholder:"Descri√ß√£o detalhada do produto",rows:4})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Se√ß√£o"}),e.jsxs("select",{value:r.setId,onChange:n=>C(J(X({},r),{setId:n.target.value,subsetId:""})),children:[e.jsx("option",{value:"",children:"Nenhuma se√ß√£o"}),u.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Subse√ß√£o"}),e.jsxs("select",{value:r.subsetId,onChange:n=>C(J(X({},r),{subsetId:n.target.value})),disabled:!r.setId,children:[e.jsx("option",{value:"",children:"Nenhuma subse√ß√£o"}),p.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ordem de Exibi√ß√£o"}),e.jsx("input",{type:"number",value:r.displayOrder,onChange:n=>C(J(X({},r),{displayOrder:parseInt(n.target.value)||0})),min:"0"})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:r.isActive,onChange:n=>C(J(X({},r),{isActive:n.target.checked}))})," ","Produto Ativo"]})})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"submit-button",children:x?"Salvar Altera√ß√µes":"Criar Produto"}),e.jsx("button",{type:"button",onClick:Q,className:"cancel-button",children:"Cancelar"})]})]})]}),!h&&o.length>0&&e.jsx("div",{className:"products-list",children:o.map(n=>e.jsxs("div",{className:"product-card",children:[e.jsx("div",{className:"product-image",children:n.image?e.jsx("img",{src:n.image,alt:n.title}):e.jsx("div",{className:"no-image",children:"üì∑"})}),e.jsxs("div",{className:"product-info",children:[e.jsx("h3",{children:n.title}),e.jsxs("p",{className:"product-description",children:[n.description1," ",n.description2]}),e.jsxs("div",{className:"product-price",children:[n.old_price&&e.jsx("span",{className:"old-price",children:n.old_price}),e.jsx("span",{className:"new-price",children:n.new_price})]}),e.jsxs("div",{className:"product-meta",children:[e.jsx("span",{className:`status ${n.is_active?"active":"inactive"}`,children:n.is_active?"‚úÖ Ativo":"‚ùå Inativo"}),e.jsxs("span",{className:"order",children:["Ordem: ",n.display_order]})]})]}),e.jsxs("div",{className:"product-actions",children:[e.jsx("button",{onClick:()=>$(n),className:"edit-button",children:"‚úèÔ∏è Editar"}),e.jsx("button",{onClick:()=>z(n.id),className:"delete-button",children:"üóëÔ∏è Excluir"})]})]},n.id))})]})})}function rt(){const{store:s}=he(),[o,a]=t.useState([]),[u,c]=t.useState(!0),[p,l]=t.useState(!1),[g,v]=t.useState(null),[h,w]=t.useState({name:"",display_order:0,is_active:!0}),[x,d]=t.useState("");t.useEffect(()=>{s!=null&&s.id&&r()},[s==null?void 0:s.id]);const r=()=>G(null,null,function*(){if(s!=null&&s.id){c(!0);try{const{data:i,error:b}=yield M.from("sets").select("*").eq("store_id",s.id).order("display_order",{ascending:!0});if(b)throw b;a(i||[])}catch(i){console.error("Erro ao carregar se√ß√µes:",i),d(`‚ùå Erro ao carregar se√ß√µes: ${i.message}`)}finally{c(!1)}}}),C=()=>{v(null);const i=o.length>0?Math.max(...o.map(b=>b.display_order)):-1;w({name:"",display_order:i+1,is_active:!0}),l(!0),d("")},I=i=>{v(i),w({name:i.name,display_order:i.display_order,is_active:i.is_active}),l(!0),d("")},T=i=>G(null,null,function*(){if(confirm("Tem certeza que deseja excluir esta se√ß√£o?"))try{const{error:b}=yield M.from("sets").delete().eq("id",i).eq("store_id",s==null?void 0:s.id);if(b)throw b;d("‚úÖ Se√ß√£o exclu√≠da com sucesso!"),ye(),r()}catch(b){console.error("Erro ao excluir se√ß√£o:",b),d(`‚ùå Erro ao excluir se√ß√£o: ${b.message}`)}}),D=i=>G(null,null,function*(){if(i.preventDefault(),!!(s!=null&&s.id)){d("");try{if(g){const{error:b}=yield M.from("sets").update({name:h.name,display_order:h.display_order,is_active:h.is_active,updated_at:new Date().toISOString()}).eq("id",g.id).eq("store_id",s.id);if(b)throw b;d("‚úÖ Se√ß√£o atualizada com sucesso!")}else{const{error:b}=yield M.from("sets").insert({name:h.name,display_order:h.display_order,is_active:h.is_active,store_id:s.id});if(b)throw b;d("‚úÖ Se√ß√£o criada com sucesso!")}ye(),l(!1),v(null),yield r()}catch(b){console.error("Erro ao salvar se√ß√£o:",b),d(`‚ùå Erro ao salvar se√ß√£o: ${b.message}`)}}}),j=()=>{l(!1),v(null),w({name:"",display_order:0,is_active:!0}),d("")};return u?e.jsx(pe,{children:e.jsx("div",{className:"loading",children:"Carregando se√ß√µes..."})}):o.length===0&&!p?e.jsx(pe,{children:e.jsxs("div",{className:"sections-admin-page",children:[x&&e.jsx("div",{className:`message ${x.includes("‚ùå")?"error":"success"}`,children:x}),e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"üìë"}),e.jsx("h3",{children:"Nenhuma se√ß√£o criada"}),e.jsx("p",{children:"Comece criando sua primeira se√ß√£o para organizar seus produtos"}),e.jsx("button",{className:"add-button",onClick:C,children:"‚ûï Criar Primeira Se√ß√£o"})]})]})}):e.jsx(pe,{children:e.jsxs("div",{className:"sections-admin-page",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{children:[e.jsx("h1",{children:"Gerenciamento de Se√ß√µes"}),e.jsx("p",{className:"subtitle",children:"Organize seus produtos em categorias e se√ß√µes personalizadas"})]})}),x&&e.jsx("div",{className:`message ${x.includes("‚ùå")?"error":"success"}`,children:x}),p&&e.jsxs("div",{className:"form-card",children:[e.jsx("h2",{children:g?"Editar Se√ß√£o":"Nova Se√ß√£o"}),e.jsxs("form",{onSubmit:D,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nome da Se√ß√£o *"}),e.jsx("input",{type:"text",value:h.name,onChange:i=>w(J(X({},h),{name:i.target.value})),placeholder:"Ex: Queijos Artesanais",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ordem de Exibi√ß√£o"}),e.jsx("input",{type:"number",value:h.display_order,onChange:i=>w(J(X({},h),{display_order:parseInt(i.target.value)||0})),min:"0"}),e.jsx("small",{children:"Se√ß√µes com menor n√∫mero aparecem primeiro"})]}),e.jsx("div",{className:"form-group checkbox-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:h.is_active,onChange:i=>w(J(X({},h),{is_active:i.target.checked}))}),e.jsx("span",{children:"Se√ß√£o ativa (vis√≠vel na loja)"})]})}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"save-button",children:g?"üíæ Salvar Altera√ß√µes":"‚ûï Criar Se√ß√£o"}),e.jsx("button",{type:"button",onClick:j,className:"cancel-button",children:"Cancelar"})]})]})]}),o.length>0&&e.jsx("div",{className:"sets-list",children:e.jsx("div",{className:"sets-grid",children:o.map(i=>e.jsxs("div",{className:"set-card",children:[e.jsxs("div",{className:"set-header",children:[e.jsx("h3",{children:i.name}),e.jsx("div",{className:"set-badge",children:i.is_active?e.jsx("span",{className:"badge active",children:"Ativa"}):e.jsx("span",{className:"badge inactive",children:"Inativa"})})]}),e.jsx("div",{className:"set-info",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Ordem:"})," ",i.display_order]})}),e.jsxs("div",{className:"set-actions",children:[e.jsx("button",{className:"edit-button",onClick:()=>I(i),children:"‚úèÔ∏è Editar"}),e.jsx("button",{className:"delete-button",onClick:()=>T(i.id),children:"üóëÔ∏è Excluir"})]})]},i.id))})})]})})}function it(){const{store:s,loading:o,loadStoreByAdminUser:a}=he(),{user:u}=be(),{isSearchOpen:c}=ge();return t.useEffect(()=>{window.scrollTo(0,0),!s&&!o&&u&&a(u.id)},[s,o,u,a]),o||!s?e.jsx("div",{className:"loading",style:{padding:"40px",textAlign:"center"},children:o?"Carregando loja...":"N√£o foi poss√≠vel carregar a loja."}):e.jsxs("div",{className:"app",children:[e.jsxs("div",{className:"fixed-header",children:[e.jsx(Ue,{}),!c&&e.jsx(He,{})]}),e.jsx(Ze,{previewMode:!0})]})}function ct(){const{store:s}=he();return e.jsx(pe,{children:e.jsxs("div",{className:"settings-page",children:[e.jsx("h1",{children:"Configura√ß√µes"}),e.jsx("p",{className:"subtitle",children:"Gerencie as configura√ß√µes gerais da sua loja"}),e.jsxs("section",{className:"settings-section",children:[e.jsx("h2",{children:"Informa√ß√µes da Loja"}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Nome da Loja"}),e.jsx("p",{children:s==null?void 0:s.name})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Slug"}),e.jsx("p",{children:s==null?void 0:s.slug})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Email do Propriet√°rio"}),e.jsx("p",{children:s==null?void 0:s.ownerEmail})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Status da Assinatura"}),e.jsx("p",{className:"status-badge active",children:s==null?void 0:s.subscriptionStatus})]})]})]}),e.jsxs("section",{className:"settings-section",children:[e.jsx("h2",{children:"Acesso √† Loja"}),e.jsxs("div",{className:"access-info",children:[e.jsx("p",{className:"info-label",children:"URL da sua loja:"}),e.jsxs("div",{className:"url-display",children:[e.jsxs("code",{children:[window.location.origin,"/?store=",s==null?void 0:s.slug]}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/?store=${s==null?void 0:s.slug}`),alert("URL copiada!")},className:"copy-button",children:"üìã Copiar"}),e.jsx("button",{onClick:()=>{window.open(`${window.location.origin}/?store=${s==null?void 0:s.slug}`,"_blank")},className:"test-button",children:"üîó Abrir Loja"})]}),e.jsx("p",{className:"info-hint",children:"Compartilhe esta URL com seus clientes para que eles acessem sua loja."})]})]}),e.jsxs("section",{className:"settings-section",children:[e.jsx("h2",{children:"Outras Configura√ß√µes"}),e.jsxs("div",{className:"coming-soon-box",children:[e.jsx("p",{children:"üöß Configura√ß√µes adicionais estar√£o dispon√≠veis em breve:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Configura√ß√µes de entrega"}),e.jsx("li",{children:"Formas de pagamento"}),e.jsx("li",{children:"Notifica√ß√µes por email"}),e.jsx("li",{children:"Integra√ß√µes"})]})]})]})]})})}function xe({children:s}){const{user:o,loading:a}=be(),[u,c]=t.useState(!1);return t.useEffect(()=>{if(a){const p=setTimeout(()=>{c(!0)},2e3);return()=>clearTimeout(p)}else c(!1)},[a]),t.useEffect(()=>{(!a||u)&&!o&&(window.location.href="/admin/login")},[a,u,o]),!a&&!o?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px",color:"#666"},children:"Redirecionando..."}):a&&!u?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px",color:"#666"},children:"Carregando..."}):o?e.jsx(e.Fragment,{children:s}):null}function lt(){const{user:s,loading:o}=be();return t.useEffect(()=>{o||(s?window.location.href="/admin/dashboard":window.location.href="/admin/login")},[s,o]),e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px",color:"#666"},children:"Carregando..."})}function dt(){const s=t.useRef(null),o=we(),{isSearchOpen:a}=ge(),u=o.pathname.startsWith("/checkout"),c=o.pathname==="/checkout/identification",p=o.pathname.startsWith("/product/"),l=o.pathname.startsWith("/admin");return t.useEffect(()=>{sessionStorage.getItem("navigationActive")&&sessionStorage.setItem("navigationActive","true")},[o.pathname]),t.useEffect(()=>{if(u||p||l)return;const g=()=>{if(s.current){const h=document.querySelector(".main-content, .cart-content");if(h)if(window.innerWidth>=768)h.style.paddingTop="";else{const x=s.current.offsetHeight,d=a?`${x+10}px`:`${x+30}px`;h.style.paddingTop=d}}};g(),requestAnimationFrame(g),setTimeout(g,0),setTimeout(g,50),setTimeout(g,100),setTimeout(g,200),window.addEventListener("resize",g);const v=document.querySelector(".logo-image");return v&&(v.complete?g():v.addEventListener("load",g)),()=>{window.removeEventListener("resize",g),v&&v.removeEventListener("load",g)}},[a,o,u]),e.jsxs("div",{className:"app",children:[!u&&!c&&!p&&!l&&e.jsxs("div",{className:"fixed-header",ref:s,children:[e.jsx(Ue,{}),!a&&e.jsx(He,{})]}),e.jsxs(as,{children:[e.jsx(ce,{path:"/",element:e.jsx(Ze,{})}),e.jsx(ce,{path:"/product/:productId",element:e.jsx(et,{})}),e.jsx(ce,{path:"/checkout/identification",element:e.jsx(Ks,{})}),e.jsx(ce,{path:"/checkout/:productId?",element:e.jsx(Ys,{})}),e.jsx(ce,{path:"/cart",element:e.jsx(Xs,{})}),e.jsx(ce,{path:"/admin",element:e.jsx(lt,{})}),e.jsx(ce,{path:"/admin/register",element:e.jsx(ot,{})}),e.jsx(ce,{path:"/admin/login",element:e.jsx(tt,{})}),e.jsx(ce,{path:"/admin/dashboard",element:e.jsx(xe,{children:e.jsx(nt,{})})}),e.jsx(ce,{path:"/admin/produtos",element:e.jsx(xe,{children:e.jsx(at,{})})}),e.jsx(ce,{path:"/admin/secoes",element:e.jsx(xe,{children:e.jsx(rt,{})})}),e.jsx(ce,{path:"/admin/personalizacao",element:e.jsx(xe,{children:e.jsx(it,{})})}),e.jsx(ce,{path:"/admin/configuracoes",element:e.jsx(xe,{children:e.jsx(ct,{})})})]})]})}class ut extends t.Component{constructor(){super(...arguments);$e(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(a){return console.error("ErrorBoundary capturou um erro:",a),{hasError:!0,error:a}}componentDidCatch(a,u){console.error("Erro capturado pelo ErrorBoundary:",a,u)}render(){var a;return this.state.hasError?e.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:"#4A2C1A",minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx("h1",{style:{fontFamily:"Outfit, sans-serif",fontSize:"24px",marginBottom:"20px"},children:"Ops! Algo deu errado"}),e.jsx("p",{style:{marginBottom:"20px"},children:((a=this.state.error)==null?void 0:a.message)||"Ocorreu um erro inesperado"}),e.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},style:{padding:"12px 24px",backgroundColor:"#4A2C1A",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontFamily:"Outfit, sans-serif",fontWeight:700},children:"Recarregar p√°gina"})]}):this.props.children}}rs.createRoot(document.getElementById("root")).render(e.jsx(t.StrictMode,{children:e.jsx(ut,{children:e.jsx(is,{children:e.jsx(ps,{children:e.jsx(st,{children:e.jsx(us,{children:e.jsx(Bs,{children:e.jsx(dt,{})})})})})})})}));
